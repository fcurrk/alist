import{u as w,a as y,b5 as c,q as C,c5 as d,f as e,a8 as o,B as s,a5 as D,c6 as O,c7 as _,c8 as u,E as g,c9 as h,ca as B,cb as a,aO as F,bd as m,n as L,a3 as R}from"./index.e75a5218.js";import{u as x}from"./useT.bf2c8b77.js";import{b as H}from"./useTitle.65b8c135.js";import{D as q}from"./DeletePopover.c5802a0c.js";const P=()=>{const n=x();H("manage.sidemenu.storages");const{to:l}=w(),[b,p]=y(()=>c.get("/admin/storage/list")),[f,$]=C([]),i=async()=>{const r=await p();m(r,t=>$(t.content))};i();const[S,k]=d(r=>c.post(`/admin/storage/delete?id=${r}`)),[T,v]=d((r,t)=>c.post(`/admin/storage/${t!=null&&t.disabled?"enable":"disable"}?id=${t==null?void 0:t.id}`));return e(R,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(o,{spacing:"$2",get children(){return[e(s,{colorScheme:"accent",get loading(){return b()},onClick:i,get children(){return n("global.refresh")}}),e(s,{onClick:()=>{l("/@manage/storages/add")},get children(){return n("global.add")}})]}}),e(D,{w:"$full",overflowX:"auto",get children(){return e(O,{highlightOnHover:!0,dense:!0,get children(){return[e(_,{get children(){return e(u,{get children(){return[e(g,{each:["mount_path","driver","order","status","remark"],children:r=>e(h,{get children(){return n(`storages.common.${r}`)}})}),e(h,{get children(){return n("global.operations")}})]}})}}),e(B,{get children(){return e(g,{get each(){return f()},children:r=>e(u,{get children(){return[e(a,{get children(){return r.mount_path}}),e(a,{get children(){return n(`drivers.drivers.${r.driver}`)}}),e(a,{get children(){return r.order}}),e(a,{get children(){return r.status}}),e(a,{get children(){return r.remark}}),e(a,{get children(){return e(o,{spacing:"$2",get children(){return[e(s,{onClick:()=>{l(`/@manage/storages/edit/${r.id}`)},get children(){return n("global.edit")}}),e(s,{get loading(){return T()===r.id},colorScheme:"warning",onClick:async()=>{const t=await v(r.id,r);F(t,()=>{i()})},get children(){return n(`global.${r.disabled?"enable":"disable"}`)}}),e(q,{get name(){return r.mount_path},get loading(){return S()===r.id},onClick:async()=>{const t=await k(r.id);m(t,()=>{L.success(n("global.delete_success")),i()})}})]}})}})]}})})}})]}})}})]}})};export{P as default};
