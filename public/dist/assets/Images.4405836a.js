import{j as e,ag as i,aq as p,r as x,C as d,aK as $,a3 as m,aJ as k,aM as C,co as l,as as I,y as n,bG as _,an as y,ap as v,E as c,o as u,c2 as M,l as g,bs as E}from"./index.5c2ea107.js";import{b as G}from"./Folder.408d8293.js";import{a as L,M as S}from"./Layout.003fea85.js";import{c as O,a as z}from"./useUtil.7880b1a3.js";import{I as A}from"./ImageWithError.771e26ad.js";import{O as F,g as H}from"./icon.341c253b.js";import{G as P}from"./GridItem.b23ef9f2.js";import"./Paginator.75ff6386.js";import"./index.d210cf4c.js";import"./index.a0c3f668.js";import"./api.6547826f.js";import"./index.33783a67.js";import"./FolderTree.3a69dd74.js";const W=t=>{const{isHide:r}=O();if(r(t.obj)||t.obj.type!==F.IMAGE)return null;const{setPathAs:a}=L(),b=e(p,{get color(){return i()},boxSize:"$12",get as(){return H(t.obj)}}),[h,s]=x(!1),f=d(()=>$()&&(h()||t.obj.selected)),{show:j}=G({id:1}),{rawLink:w}=z();return e(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return e(m,{w:"$full",class:"image-item",p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:`2px solid ${i()}`}},onMouseEnter:()=>{s(!0),a(t.obj.name,t.obj.is_dir,!0)},onMouseLeave:()=>{s(!1)},onContextMenu:o=>{k(()=>{C(!1),l(t.index,!0,!0)}),j(o,{props:t.obj})},get children(){return e(I,{w:"$full",pos:"relative",get children(){return[e(n,{get when(){return f()},get children(){return e(_,{pos:"absolute",left:"$1",top:"$1",get checked(){return t.obj.selected},onChange:o=>{l(t.index,o.target.checked)}})}}),e(A,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return e(y,{size:"lg"})},fallbackErr:b,get src(){return w(t.obj)},loading:"lazy",onClick:()=>{v.emit("gallery",t.obj.name)}})]}})}})}})},Z=()=>{const t=d(()=>e(M,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return e(c,{get each(){return u.objs.filter(r=>r.is_dir)},children:(r,a)=>e(P,{obj:r,get index(){return a()}})})}}));return e(m,{spacing:"$2",w:"$full",get children(){return[e(n,{get when(){return g.show_folder_in_image_view==="top"},get children(){return t()}}),e(E,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return e(c,{get each(){return u.objs},children:(r,a)=>e(W,{obj:r,get index(){return a()}})})}}),e(n,{get when(){return g.show_folder_in_image_view==="bottom"},get children(){return t()}})]}})};export{Z as default};
