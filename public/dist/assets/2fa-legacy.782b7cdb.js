System.register(["./index-legacy.ef1ab517.js","./useT-legacy.0e445ef0.js"],(function(e,r){"use strict";var t,n,a,s,u,c,i,g,o,d,l,f,y,h,p,b,v,x;return{setters:[e=>{t=e.u,n=e.a,a=e.b4,s=e.d,u=e.e,c=e.k,i=e.W,g=e.bf,o=e.a5,d=e.I,l=e.B,f=e.Z,y=e.a3,h=e.n,p=e.bd,b=e.aK,v=e.c1},e=>{x=e.u}],execute:function(){e("default",(()=>{const{back:e}=t(),[r,w]=n((()=>a.post("/auth/2fa/generate"))),k=x(),[$,_]=s(),[m,I]=s("");(async()=>{if(y().otp)return h.warning(k("users.2fa_already_enabled")),void e();const r=await w();p(r,_)})();const[j,q]=n((()=>a.post("/auth/2fa/verify",{code:m(),secret:$()?.secret}))),K=async()=>{const r=await q();b(r,(()=>{v({...y(),otp:!0}),e()}))};return u(f,{get loading(){return r()},get children(){return u(c,{get when(){return $()},get children(){return u(i,{spacing:"$2",alignItems:"start",get children(){return[u(g,{get children(){return k("users.scan_qr")}}),u(o,{boxSize:"$xs",rounded:"$lg",get src(){return $()?.qr}}),u(d,{maxW:"$xs",get placeholder(){return k("users.input_code")},get value(){return m()},onInput:e=>I(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&K()}}),u(l,{get loading(){return j()},onClick:K,get children(){return k("users.verify")}})]}})}})}})}))}}}));
