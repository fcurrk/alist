import{u as b,a as d,b7 as u,f as e,W as w,ai as C,a8 as m,a9 as c,bs as p,aa as h,B as s,aQ as x,be as $,n as B,a3 as f,q as v,bY as y,E as _}from"./index.1367e2ba.js";import{u as k}from"./useT.933688b4.js";import{b as D}from"./useTitle.cdab2a69.js";import{D as L}from"./DeletePopover.0f3742ff.js";const M=t=>{const a=k(),{to:o}=b(),[l,i]=d(()=>u.post(`/admin/storage/delete?id=${t.storage.id}`)),[g,n]=d(()=>u.post(`/admin/storage/${t.storage.disabled?"enable":"disable"}?id=${t.storage.id}`));return e(f,{w:"$full",spacing:"$2",rounded:"$lg",border:"1px solid $neutral7",get background(){return w("$neutral2","$neutral3")()},p:"$3",get _hover(){return{border:`1px solid ${C()}`}},get children(){return[e(m,{spacing:"$2",get children(){return[e(c,{fontWeight:"$medium",css:{wordBreak:"break-all"},get children(){return t.storage.mount_path}}),e(p,{colorScheme:"info",get children(){return a(`drivers.drivers.${t.storage.driver}`)}})]}}),e(c,{css:{wordBreak:"break-all"},get children(){return[h(()=>a("storages.common.status")),": ",h(()=>t.storage.status)]}}),e(c,{css:{wordBreak:"break-all"},get children(){return t.storage.remark}}),e(m,{spacing:"$2",get children(){return[e(s,{onClick:()=>{o(`/@manage/storages/edit/${t.storage.id}`)},get children(){return a("global.edit")}}),e(s,{get loading(){return g()},colorScheme:"warning",onClick:async()=>{const r=await n();x(r,()=>{t.refresh()})},get children(){return a(`global.${t.storage.disabled?"enable":"disable"}`)}}),e(L,{get name(){return t.storage.mount_path},get loading(){return l()},onClick:async()=>{const r=await i();$(r,()=>{B.success(a("global.delete_success")),t.refresh()})}})]}})]}})},O=()=>{const t=k();D("manage.sidemenu.storages");const{to:a}=b(),[o,l]=d(()=>u.get("/admin/storage/list")),[i,g]=v([]),n=async()=>{const r=await l();$(r,S=>g(S.content))};return n(),e(f,{spacing:"$3",alignItems:"start",w:"$full",get children(){return[e(m,{spacing:"$2",get children(){return[e(s,{colorScheme:"accent",get loading(){return o()},onClick:n,get children(){return t("global.refresh")}}),e(s,{onClick:()=>{a("/@manage/storages/add")},get children(){return t("global.add")}})]}}),e(y,{w:"$full",gap:"$2_5",templateColumns:{"@initial":"1fr","@lg":"repeat(auto-fill, minmax(324px, 1fr))"},get children(){return e(_,{get each(){return i()},children:r=>e(M,{storage:r,refresh:n})})}})]}})};export{O as default};
