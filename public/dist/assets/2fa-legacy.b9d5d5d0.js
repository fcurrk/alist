System.register(["./index-legacy.7de2e5d4.js","./useT-legacy.36940e0e.js"],(function(e,r){"use strict";var t,n,a,s,u,c,i,g,o,d,l,f,h,y,p,x,v,b;return{setters:[e=>{t=e.u,n=e.a,a=e.b7,s=e.q,u=e.f,c=e.x,i=e.a4,g=e.ah,o=e.af,d=e.I,l=e.B,f=e.a7,h=e.ad,y=e.n,p=e.be,x=e.aQ,v=e.c2},e=>{b=e.u}],execute:function(){e("default",(()=>{const{back:e}=t(),[r,w]=n((()=>a.post("/auth/2fa/generate"))),$=b(),[_,k]=s(),[m,q]=s("");(async()=>{if(h().otp)return y.warning($("users.2fa_already_enabled")),void e();const r=await w();p(r,k)})();const[I,j]=n((()=>a.post("/auth/2fa/verify",{code:m(),secret:_()?.secret}))),S=async()=>{const r=await j();x(r,(()=>{v({...h(),otp:!0}),e()}))};return u(f,{get loading(){return r()},get children(){return u(c,{get when(){return _()},get children(){return u(i,{spacing:"$2",alignItems:"start",get children(){return[u(g,{get children(){return $("users.scan_qr")}}),u(o,{boxSize:"$xs",rounded:"$lg",get src(){return _()?.qr}}),u(d,{maxW:"$xs",get placeholder(){return $("users.input_code")},get value(){return m()},onInput:e=>q(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&S()}}),u(l,{get loading(){return I()},onClick:S,get children(){return $("users.verify")}})]}})}})}})}))}}}));
