System.register(["./index-legacy.ef1ab517.js","./useT-legacy.0e445ef0.js","./useTitle-legacy.d2ddfd04.js","./DeletePopover-legacy.27219d0e.js"],(function(e,r){"use strict";var n,t,c,l,s,a,u,i,g,d,o,h,m,b,$,f,p,y,v,w,j,k,C,S,_,x;return{setters:[e=>{n=e.u,t=e.a,c=e.b4,l=e.d,s=e.c3,a=e.e,u=e.a0,i=e.B,g=e.Y,d=e.c4,o=e.c5,h=e.c6,m=e.v,b=e.c7,$=e.c8,f=e.c9,p=e.bd,y=e.n,v=e.W,w=e.bt,j=e.ad,k=e.ag,C=e.a2},e=>{S=e.u},e=>{_=e.b},e=>{x=e.D}],execute:function(){const r=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return a(w,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},D=e=>{const r=S();return a(u,{spacing:"$0_5",get children(){return a(m,{each:j,children:(n,t)=>a(k,{get label(){return r(`users.permissions.${n}`)},get children(){return a(g,{boxSize:"$2",rounded:"$full",get bg(){return`$${C.can(e.user,t())?"success":"danger"}9`}})}})})}})};e("default",(()=>{const e=S();_("manage.sidemenu.users");const{to:w}=n(),[j,k]=t((()=>c.get("/admin/user/list"))),[C,T]=l([]),z=async()=>{const e=await k();p(e,(e=>T(e.content)))};z();const[B,H]=s((e=>c.post(`/admin/user/delete?id=${e}`)));return a(v,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[a(u,{spacing:"$2",get children(){return[a(i,{colorScheme:"accent",get loading(){return j()},onClick:z,get children(){return e("global.refresh")}}),a(i,{onClick:()=>{w("/@manage/users/add")},get children(){return e("global.add")}})]}}),a(g,{w:"$full",overflowX:"auto",get children(){return a(d,{highlightOnHover:!0,dense:!0,get children(){return[a(o,{get children(){return a(h,{get children(){return[a(m,{each:["username","base_path","role","permission"],children:r=>a(b,{get children(){return e(`users.${r}`)}})}),a(b,{get children(){return e("global.operations")}})]}})}}),a($,{get children(){return a(m,{get each(){return C()},children:n=>a(h,{get children(){return[a(f,{get children(){return n.username}}),a(f,{get children(){return n.base_path}}),a(f,{get children(){return a(r,{get role(){return n.role}})}}),a(f,{get children(){return a(D,{user:n})}}),a(f,{get children(){return a(u,{spacing:"$2",get children(){return[a(i,{onClick:()=>{w(`/@manage/users/edit/${n.id}`)},get children(){return e("global.edit")}}),a(x,{get name(){return n.username},get loading(){return B()===n.id},onClick:async()=>{const r=await H(n.id);p(r,(()=>{y.success(e("global.delete_success")),z()}))}})]}})}})]}})})}})]}})}})]}})}))}}}));
