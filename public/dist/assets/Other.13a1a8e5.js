import{d as M,r as a,a as i,b8 as o,j as t,ao as $,c3 as O,m as S,B as c,be as g,n as v,I as R,a8 as U,a6 as j}from"./index.790c8f59.js";import{b as x}from"./useTitle.ae182341.js";import{c as D}from"./useUtil.ac4b0c54.js";import{G as C}from"./index.0e1571a1.js";import{I}from"./SettingItem.7482b7a7.js";import"./api.35f217b7.js";import"./index.b742be39.js";import"./item_type.be442da4.js";const V=()=>{const s=M();x("manage.sidemenu.other");const[u,l]=a(""),[m,d]=a(""),[p,h]=a(""),[k,b]=a([]),[L,T]=i(()=>o.get(`/admin/setting/list?groups=${C.ARIA2},${C.SINGLE}`)),[A,G]=i(()=>o.post("/admin/setting/set_aria2",{uri:u(),secret:m()}));(async()=>{const e=await T();g(e,n=>{var _,y,f;l(((_=n.find(r=>r.key==="aria2_uri"))==null?void 0:_.value)||""),d(((y=n.find(r=>r.key==="aria2_secret"))==null?void 0:y.value)||""),h(((f=n.find(r=>r.key==="token"))==null?void 0:f.value)||""),b(n)})})();const[w,B]=i(()=>o.post("/admin/setting/reset_token")),{copy:H}=D();return t(j,{get loading(){return L()},get children(){return[t($,{mb:"$2",get children(){return s("settings_other.aria2")}}),t(O,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[t(I,S(()=>k().find(e=>e.key==="aria2_uri"),{get value(){return u()},onChange:e=>l(e)})),t(I,S(()=>k().find(e=>e.key==="aria2_secret"),{get value(){return m()},onChange:e=>d(e)}))]}}),t(c,{my:"$2",get loading(){return A()},onClick:async()=>{const e=await G();g(e,n=>{v.success(`${s("settings_other.aria2_version")} ${n}`)})},get children(){return s("settings_other.set_aria2")}}),t($,{my:"$2",get children(){return s("settings.token")}}),t(R,{get value(){return p()},readOnly:!0}),t(U,{my:"$2",spacing:"$2",get children(){return[t(c,{onClick:()=>{H(p())},get children(){return s("settings_other.copy_token")}}),t(c,{colorScheme:"danger",get loading(){return w()},onClick:async()=>{const e=await B();g(e,n=>{v.success(s("settings_other.reset_token_success")),h(n)})},get children(){return s("settings_other.reset_token")}})]}})]}})};export{V as default};
