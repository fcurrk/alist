import{aQ as k,a as y,h as t,I as Q,S as d,C as i,al as $,M as v,y as M,bl as U,z as O,A as x,B as I,D as B,m as h,ae as H,d4 as W,ds as X,b0 as q,dt as G,_ as K,du as Y,x as _,r as Z,dv as p,as as f,aF as S,a7 as ee,N as te,ac as R,p as ne,a8 as re,H as oe,d as ae,dw as le,bi as ce}from"./index-25fdf47f.js";import{w as de,j as ue}from"./index-df23ac35.js";const T=le(),z=e=>{var o;const[l,n]=h("/");return(o=e.handle)==null||o.call(e,{setPath:n}),t(H,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return t(T.Provider,{get value(){return{value:l,onChange:r=>{n(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return t(D,{path:"/"})}})}})},D=e=>{const{isHidePath:l}=W(),[n,o]=h(),{value:r,onChange:u,forceRoot:a,autoOpen:E,showEmptyIcon:P,showHiddenFolder:V}=X(T),A=()=>{var c;return!!(P&&n()!==void 0&&!((c=n())!=null&&c.length))},[N,j]=q(()=>G(e.path,K(),a));let C=!1;const w=async()=>{var b;if((b=n())!=null&&b.length)return;const c=await j();ce(c,L=>{C=!0,o(L)},()=>{s()&&g()})},{isOpen:s,onToggle:g}=k(),m=()=>r()===e.path,F=Y(e.path);_(Z(r,async c=>{E&&F(c)&&(s()||g(),C||w())}));const J=()=>l(e.path)&&!F(r());return t(d,{get when(){return V||!J()},get children(){return t(H,{get children(){return[t($,{spacing:"$2",get children(){return[t(d,{get when(){return!N()},get fallback(){return t(p,{size:"sm",get color(){return f()}})},get children(){return t(d,{get when(){return!A()},get fallback(){return t(S,{get color(){return f()},as:de})},get children(){return t(S,{get color(){return f()},as:ue,get transform(){return s()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{g(),s()&&w()}})}})}}),t(ee,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return m()?"$info8":"transparent"},get _hover(){return{bgColor:m()?"$info8":te()}},onClick:()=>{u(e.path)},get children(){return R(()=>e.path==="/",!0)()?"root":ne(e.path)}})]}}),t(d,{get when(){return s()},get children(){return t(re,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return t(oe,{get each(){return n()},children:c=>t(D,{get path(){return ae(e.path,c.name)}})})}})}})]}})}})},ge=e=>{const l=y(),[n,o]=h(e.defaultValue??"/"),[r,u]=h();return _(()=>{var a;e.opened&&((a=r())==null||a.setPath(n()))}),t(B,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[t(v,{}),t(M,{get children(){return[t(O,{w:"$full",css:{overflowWrap:"break-word"},get children(){return e.header}}),t(x,{get children(){return[R(()=>e.children),t(z,{onChange:o,handle:a=>u(a),autoOpen:!0})]}}),t(I,{display:"flex",gap:"$2",get children(){return[t(d,{get when(){return e.footerSlot},get children(){return e.footerSlot}}),t(i,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return l("global.cancel")}}),t(i,{get loading(){return e.loading},onClick:()=>{var a;return(a=e.onSubmit)==null?void 0:a.call(e,n())},get children(){return l("global.ok")}})]}})]}})]}})},fe=e=>{const{isOpen:l,onOpen:n,onClose:o}=k(),r=y();return[t($,{w:"$full",spacing:"$2",get children(){return[t(Q,{get id(){return e.id},get value(){return e.value},onInput:u=>e.onChange(u.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?n:()=>{}},get placeholder(){return r(`global.${e.onlyFolder?"choose_folder":"choose_or_input_path"}`)}}),t(d,{get when(){return!e.onlyFolder},get children(){return t(i,{onClick:n,get children(){return r("global.choose")}})}})]}}),t(B,{size:"xl",get opened(){return l()},onClose:o,get children(){return[t(v,{}),t(M,{get children(){return[t(U,{}),t(O,{get children(){return r("global.choose_folder")}}),t(x,{get children(){return t(z,{forceRoot:!0,get onChange(){return e.onChange}})}}),t(I,{get children(){return t(i,{onClick:o,get children(){return r("global.confirm")}})}})]}})]}})]};export{z as F,ge as M,fe as a};
