System.register(["./index-legacy.d7f2d2e0.js","./useT-legacy.d0b23168.js"],(function(e,t){"use strict";var r,n,l,c,a,s,i,o,d,u,g,$,h,f,w,m,p,b,k,y,x;return{setters:[e=>{r=e.a,n=e.b4,l=e.q,c=e.f,a=e.c4,s=e.W,i=e.a3,o=e.be,d=e.a9,u=e.bv,g=e.bw,$=e.B,h=e.bc,f=e.n,w=e.x,m=e.bt,p=e.E,b=e.au,k=e.a8,y=e.m},e=>{x=e.u}],execute:function(){const t={errored:"danger",succeeded:"success",canceled:"neutral"},v=e=>{const r=x();return c(m,{get colorScheme(){return t[e.state]??"info"},get children(){return r(`tasks.${e.state}`)}})},C=e=>{const t=x(),m="undone"===e.done?"cancel":"delete",[p,b]=r((()=>n.post(`/admin/task/${e.type}/${m}?tid=${e.id}`))),[k,y]=l(!1);return c(w,{get when(){return!k()},get children(){return c(a,{get bgColor(){return s("$background","$neutral3")()},w:"$full",overflowX:"auto",shadow:"$md",rounded:"$lg",p:"$2",direction:{"@initial":"column","@xl":"row"},spacing:"$2",get children(){return[c(i,{w:"$full",alignItems:"start",spacing:"$1",get children(){return[c(o,{size:"sm",css:{wordBreak:"break-all"},get children(){return e.name}}),c(v,{get state(){return e.state}}),c(d,{css:{wordBreak:"break-all"},get children(){return e.status}}),c(u,{w:"$full",trackColor:"$info3",rounded:"$full",size:"sm",get value(){return e.progress},get children(){return c(g,{color:"$info8",rounded:"$md"})}})]}}),c(a,{direction:{"@initial":"row","@xl":"column"},justifyContent:{"@xl":"center"},spacing:"$1",get children(){return c($,{colorScheme:"danger",get loading(){return p()},onClick:async()=>{const e=await b();h(e,(()=>{f.success(t("global.delete_success")),y(!0)}))},get children(){return t(`global.${m}`)}})}})]}})}})},I=e=>{const t=x(),[a,s]=r((()=>n.get(`/admin/task/${e.type}/${e.done}`))),[d,u]=l([]),g=async()=>{const e=await s();h(e,(e=>u(e?.sort(((e,t)=>e.id>t.id?1:-1))??[])))};if(g(),"undone"===e.done){const e=setInterval(g,2e3);b((()=>clearInterval(e)))}const[f,m]=r((()=>n.post(`/admin/task/${e.type}/clear_done`)));return c(i,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[c(o,{size:"lg",get children(){return t(`tasks.${e.done}`)}}),c(w,{get when(){return"done"===e.done},get children(){return c(k,{spacing:"$2",get children(){return[c($,{colorScheme:"accent",get loading(){return a()},onClick:g,get children(){return t("global.refresh")}}),c($,{get loading(){return f()},onClick:async()=>{const e=await m();h(e,(()=>g()))},get children(){return t("global.clear")}})]}})}}),c(i,{w:"$full",spacing:"$2",get children(){return c(p,{get each(){return d()},children:t=>c(C,y(t,e))})}})]}})};e("T",(e=>{const t=x();return c(i,{w:"$full",alignItems:"start",spacing:"$4",get children(){return[c(o,{size:"xl",get children(){return t(`tasks.${e.type}`)}}),c(i,{w:"$full",spacing:"$2",get children(){return c(p,{each:["undone","done"],children:t=>c(I,{get type(){return e.type},done:t})})}})]}})}))}}}));
