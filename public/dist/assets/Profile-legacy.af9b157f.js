System.register(["./index-legacy.f5983ae8.js","./useT-legacy.70008edc.js","./useTitle-legacy.8a3863b3.js","./index-legacy.a30ec4b1.js"],(function(e,r){"use strict";var n,t,a,c,s,u,i,l,g,o,d,h,p,m,f,b,w,$,_,y,v,I,x,j,C,T,k,S,R,U,q;return{setters:[e=>{n=e.u,t=e.q,a=e.ac,c=e.a,s=e.b7,u=e.f,i=e.x,l=e.ab,g=e.b_,o=e.b$,d=e.c0,h=e.c1,p=e.a8,m=e.a9,f=e.ag,b=e.c2,w=e.b2,$=e.b0,_=e.I,y=e.F,v=e.B,I=e.be,x=e.c3,j=e.n,C=e.E,T=e.ao,k=e.a3,S=e.bt},e=>{R=e.u},e=>{U=e.b},e=>{q=e.L}],execute:function(){const r=e=>u(S,{get colorScheme(){return e.can?"success":"danger"},get children(){return e.children}});e("default",(()=>{const e=R();U("manage.sidemenu.profile");const{to:S}=n(),[B,D]=t(a().username),[E,F]=t(""),[L,z]=c((()=>s.post("/me/update",{username:B(),password:E()})));return u(k,{w:"$full",spacing:"$4",alignItems:"start",get children(){return[u(i,{get when(){return!l.is_guest(a())},get fallback(){return[u(g,{status:"warning",flexDirection:{"@initial":"column","@lg":"row"},get children(){return[u(o,{mr:"$2_5"}),u(d,{mr:"$2_5",get children(){return e("users.guest-tips")}}),u(h,{get children(){return e("users.modify_nothing")}})]}}),u(p,{spacing:"$2",get children(){return[u(m,{get children(){return e("global.have_account")}}),u(m,{color:"$info9",as:q,get href(){return`/@login?redirect=${encodeURIComponent(location.pathname)}`},get children(){return e("global.go_login")}})]}})]},get children(){return[u(f,{get children(){return e("users.update_profile")}}),u(b,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[u(w,{get children(){return[u($,{for:"username",get children(){return e("users.change_username")}}),u(_,{id:"username",get value(){return B()},onInput:e=>{D(e.currentTarget.value)}})]}}),u(w,{get children(){return[u($,{for:"password",get children(){return e("users.change_password")}}),u(_,{id:"password",type:"password",placeholder:"********",get value(){return E()},onInput:e=>{F(e.currentTarget.value)}}),u(y,{get children(){return e("users.change_password-tips")}})]}})]}}),u(p,{spacing:"$2",get children(){return[u(v,{get loading(){return L()},onClick:async()=>{const r=await z();I(r,(()=>{x({...a(),username:B()}),j.success(e("users.update_profile_success")),S(`/@login?redirect=${encodeURIComponent(location.pathname)}`)}))},get children(){return e("global.save")}}),u(i,{get when(){return!a().otp},get children(){return u(v,{colorScheme:"accent",onClick:()=>{S("/@manage/2fa")},get children(){return e("users.enable_2fa")}})}})]}})]}}),u(p,{wrap:"wrap",gap:"$2",mt:"$2",get children(){return u(C,{each:T,children:(n,t)=>u(r,{get can(){return l.can(a(),t())},get children(){return e(`users.permissions.${n}`)}})})}})]}})}))}}}));
