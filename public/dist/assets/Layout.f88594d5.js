import{u as xn,a as x,b as L,s as ge,n as N,c as Zt,p as le,g as kn,f as Mn,_ as Yt,l as nt,d as B,e as ct,o as E,h as n,M as ne,i as re,j as Y,k as oe,S as M,I as Le,T as On,F as En,m as fe,B as P,q as ae,r as me,t as $e,v as Tn,w as An,x as Fn,y as ut,A as Qt,z as Rn,C as Pn,D as Dn,E as q,G as Ae,H as Fe,J as Oe,K as dt,L as gt,N as je,O as Ne,P as G,Q as k,R as In,U as R,V as ie,W as Ln,X as jn,Y as we,Z as Vn,$ as en,a0 as Bn,a1 as zn,a2 as z,a3 as ve,a4 as Z,a5 as Ve,a6 as Be,a7 as Hn,a8 as Re,a9 as ht,aa as Nn,ab as O,ac as Ge,ad as ft,ae as he,af as tn,ag as Un,ah as mt,ai as qn,aj as Wn,ak as Kn,al as b,am as pt,an as Je,ao as nn,ap as se,aq as Gn,ar as Jn,as as Xn,at as ye,au as rn,av as Zn,aw as on,ax as T,ay as Ue,az as an,aA as bt,aB as Yn,aC as Qn,aD as er,aE as $t,aF as sn,aG as tr,aH as nr,aI as rr,aJ as or,aK as ar,aL as ir,aM as St,aN as sr,aO as lr,aP as cr,aQ as ur,aR as W,aS as dr,aT as J,aU as gr,aV as hr,aW as fr,aX as mr,aY as pr,aZ as br,a_ as wr,a$ as vr,b0 as yr,b1 as _r,b2 as xt,b3 as Cr,b4 as $r,b5 as Sr,b6 as kt,b7 as xr,b8 as kr,b9 as Mr,ba as Or,bb as Er,bc as Tr,bd as Ar,be as Fr,bf as Rr,bg as Pr,bh as Dr,bi as Mt,bj as Ir,bk as Lr,bl as jr,bm as Vr,bn as Br,bo as zr,bp as Hr,bq as Nr,br as Ur,bs as qr,bt as Wr,bu as Kr}from"./index.382b0bc7.js";import{u as Gr,B as ln,a as cn,b as Jr,c as Xr}from"./index.26ae0499.js";import{u as H,r as Zr,a as Yr,b as Qr,R as eo}from"./index.29fef1ef.js";import{A as to,F as un,C as no,a as ro,B as oo,b as ao,T as io,c as Ot}from"./index.e137f8bc.js";import{M as wt}from"./FolderTree.8faffb59.js";function De(e){return e==null||e===""}function so(e){return e==null}async function lo(e,t){let r="/downloads/alist";const o=await Zt.post(e,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.getGlobalOption",params:["token:"+t]});return console.log(o),o.status===200&&(De(o.data.result.dir)||(r=o.data.result.dir),r=r.endsWith("/")?r.slice(0,-1):r),r}const co=()=>{const{rawLinks:e}=xn(),t=x(),{pathname:r}=L();return{batchDownloadSelected:()=>{e(!0).forEach(a=>{window.open(a,"_blank")})},sendToAria2:async()=>{const o=ge(),a=async(s,c)=>{var u;if(c.is_dir){const d=await Mn(le(r(),s,c.name),Yt());if(d.code!==200)return d.message;const h=[];for(const g of(u=d.data.content)!=null?u:[]){const _=await a(le(s,c.name),g);if(typeof _=="string")return _;h.push(..._)}return h}else return[{path:le(s,c.name),dir:s,url:kn(le(r(),s),c,"direct",!0),name:c.name}]},{aria2_rpc_url:i,aria2_rpc_secret:l}=nt;if(!i){N.warning(t("home.toolbar.aria2_not_set"));return}try{let s="/downloads/alist";s=await lo(i,l);let c=!1;N.info(`${t("home.package_download.fetching_struct")}`);for(const u of o){const d=await a("",u);if(typeof d!="object"||d.length===void 0)return N.error(`${t("home.package_download.fetching_struct_failed")}: ${d}`),d;for(let h=0;h<d.length;h++){if(De(d[h].path)||so(d[h].dir)||De(d[h].url)||De(d[h].name)){N.error(`${t("home.package_download.fetching_struct_failed")}: ${JSON.stringify(d[h])}`);continue}c||(c=!0,N.info(`${t("home.package_download.downloading")}`));const g=await Zt.post(i,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.addUri",params:["token:"+l,[d[h].url],{out:d[h].name,dir:s+d[h].dir,"check-certificate":"false"}]});console.log(g)}}N.success(t("home.toolbar.send_aria2_success"))}catch(s){console.error(s),N.error(`failed to send to aria2: ${s}`)}}}},qe=e=>{var s;const[t,r]=B((s=e.defaultValue)!=null?s:""),o=x();let a;const i=()=>{const c=t().lastIndexOf(".");setTimeout(()=>{c>0&&e.isRenamingFile?a.setSelectionRange(0,c):a.select()},10)};ct(()=>{a&&(a.focus(),i()),E(()=>{a&&a.setSelectionRange(0,0)})});const l=()=>{var c;if(!t()){N.warning(o("global.empty_input"));return}(c=e.onSubmit)==null||c.call(e,t()),r("")};return n(ae,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input",get children(){return[n(ne,{}),n(re,{get children(){return[n(Y,{get children(){return o(e.title)}}),n(oe,{get children(){return[n(M,{get when(){return e.topSlot},get children(){return e.topSlot}}),n(M,{get when(){return e.type==="text"},get fallback(){return n(Le,{id:"modal-input",get type(){return e.type},get value(){return t()},ref:c=>a=c,onInput:c=>{r(c.currentTarget.value)},onFocus:i,onKeyDown:c=>{c.key==="Enter"&&l()}})},get children(){return n(On,{id:"modal-input",get value(){return t()},ref:c=>a=c,onInput:c=>{r(c.currentTarget.value)},onFocus:i})}}),n(M,{get when(){return e.tips},get children(){return n(En,{get children(){return e.tips}})}}),n(M,{get when(){return e.bottomSlot},get children(){return e.bottomSlot}})]}}),n(fe,{display:"flex",gap:"$2",get children(){return[n(P,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return o("global.cancel")}}),n(P,{get loading(){return e.loading},onClick:()=>l(),get children(){return o("global.ok")}})]}})]}})]}})},uo=()=>{const{pathname:e}=L(),t=me(()=>["",...e().split("/").filter(Boolean)]),r=x(),{setPathAs:o}=H();return n(Dn,{class:"nav",w:"$full",get children(){return n($e,{get each(){return t()},children:(a,i)=>{const l=me(()=>i()===t().length-1),s=t().slice(0,i()+1).join("/"),c=Tn(s);let u=()=>a;return u()===""&&(u=()=>q("home_icon")+r("manage.sidemenu.home")),n(An,{class:"nav-item",get children(){return[n(Fn,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{bgColor:ut(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return l()},get as(){return l()?void 0:Qt},get href(){return Rn(c)},onMouseEnter:()=>o(s),children:u}),n(M,{get when(){return!l()},get children(){return n(Pn,{class:"nav-separator"})}})]}})}})}})},go=Ae(()=>Fe(()=>import("./Folder.b2efb04a.js").then(e=>e.F),["assets/Folder.b2efb04a.js","assets/Folder.b511ba9e.css","assets/index.382b0bc7.js","assets/index.15d8d646.css","assets/icon.0bd85029.js","assets/index.26ae0499.js","assets/index.e137f8bc.js","assets/video_box.e757c3ae.js","assets/index.29fef1ef.js","assets/Paginator.7b4f6412.js"])),ho=Ae(()=>Fe(()=>import("./File.170d17ca.js").then(e=>e.a),["assets/File.170d17ca.js","assets/index.382b0bc7.js","assets/index.15d8d646.css","assets/icon.0bd85029.js","assets/index.26ae0499.js","assets/index.e137f8bc.js"])),fo=Ae(()=>Fe(()=>import("./Password.fd793a50.js"),["assets/Password.fd793a50.js","assets/index.382b0bc7.js","assets/index.15d8d646.css","assets/index.29fef1ef.js","assets/index.e137f8bc.js"]));let Et=!0;const mo=()=>{const e=Oe("white","$neutral3"),{pathname:t}=L(),{handlePathChange:r}=H();let o=t();return ct(dt(t,a=>{Gr(),Et||Yr(),Et=!1,Zr(o,window.scrollY),r(a),o=a})),n(ie,{class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return e()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return n(gt,{get fallback(){return n(je,{})},get children(){return n(Ne,{get children(){return[n(G,{get when(){return k.err},get children(){return n(In,{get msg(){return k.err},disableColor:!0})}}),n(G,{get when(){return[R.FetchingObj,R.FetchingObjs].includes(k.state)},get children(){return n(je,{})}}),n(G,{get when(){return k.state===R.NeedPassword},get children(){return n(fo,{})}}),n(G,{get when(){return[R.Folder,R.FetchingMore].includes(k.state)},get children(){return n(go,{})}}),n(G,{get when(){return k.state===R.File},get children(){return n(ho,{})}})]}})}})}})};function Tt(e){const t=Oe("white","$neutral3"),{proxyLink:r}=Ln(),{pathname:o}=L(),a=me(dt(()=>k.state,()=>{if(![R.FetchingMore,R.Folder,R.File].includes(k.state))return"";if([R.FetchingMore,R.Folder].includes(k.state)){const s=k.objs.find(c=>e.files.find(u=>u.toLowerCase()===c.name.toLowerCase()));if(s)return r(s,!0)}return k[e.fromMeta]&&typeof k[e.fromMeta]=="string"?k[e.fromMeta]:""})),i=async s=>{let c={content:s};return/^https?:\/\//g.test(s)&&(c=await Bn(s)),setTimeout(()=>{Qr(o())}),c},[l]=jn(a,i);return n(M,{get when(){return a()},get children(){return n(we,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return t()},shadow:"$lg",get children(){return n(Vn,{get loading(){return l.loading},get children(){return n(en,{get children(){var s;return(s=l())==null?void 0:s.content}})}})}})}})}const dn=e=>{const t=q("home_container");return n(Ne,{get fallback(){return n(we,{w:"min(99%, 980px)",get children(){return e.children}})},get children(){return n(G,{when:t==="hope_container",get children(){return n(zn,{get children(){return e.children}})}})}})},po=()=>n(dn,{get children(){return n(ie,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[n(Tt,{files:["header.md","top.md"],fromMeta:"header"}),n(uo,{}),n(mo,{}),n(Tt,{files:["readme.md","footer.md","bottom.md"],fromMeta:"readme"})]}})}}),bo=Re("<span> |</span>"),wo=()=>{const e=x();return n(ie,{class:"footer",w:"$full",py:"$4",get children(){return[n(z,{spacing:"$1",get children(){return n(ve,{className:"line1",get children(){return[Z(()=>e("\xA92023 "))," ",Z(()=>q("site_title"))]}})}}),n(z,{spacing:"$1",get children(){return[n(ve,{className:"line1",get children(){return e("home.footer.powered_by")}}),bo.cloneNode(!0),n(to,{as:Qt,get href(){return Ve.is_guest(Be())?"/@login":"/@manage"},get children(){return e(Ve.is_guest(Be())?"login.login":"home.footer.manage")}}),Z(()=>Z(()=>!!q("site_beian"),!0)()&&n(Hn,{href:"https://beian.miit.gov.cn",external:!0,get children(){return q("site_beian")}}))]}})]}})},At={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},Se="^\\s*",xe="\\s*$",ce="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",ue="([0-9A-Fa-f])",de="([0-9A-Fa-f]{2})",vo=new RegExp(`${Se}rgb\\s*\\(${ce},${ce},${ce}\\)${xe}`),yo=new RegExp(`${Se}rgba\\s*\\(${ce},${ce},${ce},${ce}\\)${xe}`),_o=new RegExp(`${Se}#${ue}${ue}${ue}${xe}`),Co=new RegExp(`${Se}#${de}${de}${de}${xe}`),$o=new RegExp(`${Se}#${ue}${ue}${ue}${ue}${xe}`),So=new RegExp(`${Se}#${de}${de}${de}${de}${xe}`);function I(e){return parseInt(e,16)}function gn(e){try{let t;if(t=Co.exec(e))return[I(t[1]),I(t[2]),I(t[3]),1];if(t=vo.exec(e))return[X(t[1]),X(t[5]),X(t[9]),1];if(t=yo.exec(e))return[X(t[1]),X(t[5]),X(t[9]),Xe(t[13])];if(t=_o.exec(e))return[I(t[1]+t[1]),I(t[2]+t[2]),I(t[3]+t[3]),1];if(t=So.exec(e))return[I(t[1]),I(t[2]),I(t[3]),Xe(I(t[4])/255)];if(t=$o.exec(e))return[I(t[1]+t[1]),I(t[2]+t[2]),I(t[3]+t[3]),Xe(I(t[4]+t[4])/255)];if(e in At)return gn(At[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(t){throw t}}function xo(e){return e>1?1:e<0?0:e}function Ft(e,t,r,o){return`rgba(${X(e)}, ${X(t)}, ${X(r)}, ${xo(o)})`}function Rt(e,t){const[r,o,a,i=1]=Array.isArray(e)?e:gn(e);return t.alpha?Ft(r,o,a,t.alpha):Ft(r,o,a,i)}function Xe(e){const t=Math.round(Number(e)*100)/100;return t>1?1:t<0?0:t}function X(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}const ko={list:un,grid:ln,image:cn},Mo=()=>{const e=x();return n(mt,{get children(){return[n(ht,{as:Nn,get color(){return O()},get bgColor(){return Rt(O(),{alpha:.15})},get _hover(){return{bgColor:Rt(O(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return n(Ne,{get children(){return[n(G,{get when(){return Ge()==="list"},get children(){return n(un,{})}}),n(G,{get when(){return Ge()==="grid"},get children(){return n(ln,{})}}),n(G,{get when(){return Ge()==="image"},get children(){return n(cn,{})}})]}})}}),n(ft,{get children(){return n($e,{get each(){return Object.entries(ko)},children:t=>n(he,{get icon(){return n(tn,{get component(){return t[1]}})},onSelect:()=>{Un(t[0])},get children(){return e(`home.layouts.${t[0]}`)}})})}})]}})},We=typeof window<"u"?window.navigator.userAgent:"";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(We);/^((?!chrome|android).)*safari/i.test(We);/MicroMessenger/i.test(We);/MSIE|Trident/i.test(We);var Gt,Jt,Xt;const Oo=(Xt=(Jt=(Gt=window==null?void 0:window.navigator)==null?void 0:Gt.platform)!=null?Jt:"")==null?void 0:Xt.includes("Mac"),Eo=()=>{x();const e=q("logo").split(`
`),t=Oe(e[0],e.pop()),r=q("logo_text").split(`
`),o=Oe(r[0],r.pop());return n(nn,{class:"header",w:"$full",get children(){return n(dn,{get children(){return n(z,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[n(z,{class:"header-left",h:"44px",get children(){return Z(()=>!!q("logo"),!0)()?n(qn,{get src(){return t()},h:"$full",w:"auto",get fallback(){return n(Wn,{})}}):n(Kn,{size:"lg",children:o})}}),n(z,{class:"header-right",spacing:"$2",get children(){return n(M,{get when(){return k.state===R.Folder},get children(){return[n(M,{get when(){return q("search_index")!=="none"},get children(){return n(z,{bg:"$neutral4",w:"$32",p:"$2",rounded:"$md",justifyContent:"space-between",border:"2px solid transparent",cursor:"pointer",_hover:{borderColor:"$info6"},onClick:()=>{b.emit("tool","search")},get children(){return[n(pt,{as:Jr}),n(z,{get children(){return[Z(()=>Oo?n(Je,{children:"Cmd"}):n(Je,{children:"Ctrl"})),n(Je,{children:"K"})]}})]}})}}),n(Mo,{})]}})}})]}})}})}})};function To(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l3 3 8-8"/><path d="M20 12v6a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h9"/>'},e)}function Ao(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><rect width="12" height="12" x="8" y="8" rx="2"/><path d="M16 8V6a2 2 0 00-2-2H6a2 2 0 00-2 2v8a2 2 0 002 2h2"/>'},e)}function pi(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M11 7H6a2 2 0 00-2 2v9a2 2 0 002 2h9a2 2 0 002-2v-5M10 14L20 4M15 4h5v5"/>'},e)}function Fo(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M14 3v4a1 1 0 001 1h4"/><path d="M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h7l5 5v11a2 2 0 01-2 2zM9 15h6"/><path d="M12.5 17.5L15 15l-2.5-2.5"/>'},e)}function Ro(e){return se({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5 0 005 0l4-4a3.5 3.5 0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5 0 00-5 0l-4 4a3.5 3.5 0 005 5l.5-.5"/>'},e)}function Po(e){return se({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M11 8v6h1V8h2.5l-3-3-3 3zM1 3h1.5v1H1V3zM3 3h1.5v1H3V3zM5 3h1v1.5H5V3zM1 6.5h1V8H1V6.5zM2.5 7H4v1H2.5V7zM4.5 7H6v1H4.5V7zM1 4.5h1V6H1V4.5zM5 5h1v1.5H5V5zM5 11v3H2v-3h3zm1-1H1v5h5v-5z"/>'},e)}function bi(e){return se({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M14 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zM2 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zm1.5 5.5A1.5 1.5 0 005 13v2c0 .55.45 1 1 1s1-.45 1-1v-2h2v2c0 .55.45 1 1 1s1-.45 1-1v-2a1.5 1.5 0 001.5-1.5V6h-9v5.5zM12.472 5a4.5 4.5 0 00-2.025-3.276l.5-1.001a.5.5 0 00-.895-.447L9.55 1.28l-.13-.052a4.504 4.504 0 00-2.84 0l-.13.052L5.948.276a.5.5 0 00-.895.447l.5 1.001A4.499 4.499 0 003.528 5v.5H12.5V5h-.028zM6.5 4a.5.5 0 01-.001-1h.002A.5.5 0 016.5 4zm3 0a.5.5 0 01-.001-1h.003a.5.5 0 01-.001 1z"/>'},e)}function Do(e){return se({a:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>'},e)}const Q={rename:{icon:no,color:"$accent9"},copy:{icon:Ao,color:"$success9"},move:{icon:Fo,color:"$warning9"},delete:{icon:Gn,color:"$danger9"},copy_link:{icon:Ro,color:"$info9"},mkdir:{icon:ro,p:!0},recursive_move:{icon:Po,p:!0},remove_empty_directory:{icon:Do,p:!0},batch_rename:{icon:oo,p:!0},new_file:{icon:ao,p:!0},cancel_select:{icon:io},download:{icon:Jn,color:"$primary9"}},ze=e=>{const t=Xn.findIndex(o=>o===e.name);if(t!==-1&&!Ve.can(Be(),t))return null;const r=x();return n(rn,{placement:"top",withArrow:!0,get label(){return r(`home.toolbar.${e.name}`)},get children(){return n(pt,ye({get class(){return`toolbar-${e.name}`},get _hover(){return{bgColor:ut()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",rounded:"$md",get p(){var o;return(o=Q[e.name])!=null&&o.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){var o;return(o=Q[e.name])==null?void 0:o.icon},get color(){var o;return(o=Q[e.name])==null?void 0:o.color}},e))}})},V=e=>{const t=x();return n(rn,{get disabled(){return!e.tips},placement:"left",withArrow:!0,get label(){return t(`home.toolbar.${e.tips}`)},get children(){return n(pt,ye({get color(){return O()},get _hover(){return{bgColor:O(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return e.icon}},e))}})},Io=()=>{const e=x(),{copySelectedPreviewPage:t,copySelectedRawLink:r}=Zn(),o="neutral";return n(mt,{placement:"top",offset:10,get children(){return[n(ht,{as:ze,name:"copy_link"}),n(ft,{get children(){return[n(he,{colorScheme:o,onSelect:()=>{t()},get children(){return e("home.toolbar.preview_page")}}),n(he,{colorScheme:o,onSelect:()=>{r()},get children(){return e("home.toolbar.down_link")}}),n(he,{colorScheme:o,onSelect:()=>{r(!0)},get children(){return e("home.toolbar.encode_down_link")}})]}})]}})},Lo=Re("<p></p>"),jo=()=>{const e=x(),t="neutral",{batchDownloadSelected:r,sendToAria2:o}=co();return n(mt,{placement:"top",offset:10,get children(){return[n(ht,{as:ze,name:"download"}),n(ft,{get children(){return[n(he,{colorScheme:t,onSelect:r,get children(){return e("home.toolbar.batch_download")}}),n(M,{get when(){return Ve.is_admin(Be())||on("package_download")},get children(){return n(he,{colorScheme:t,onSelect:()=>{b.emit("tool","package_download")},get children(){return e("home.toolbar.package_download")}})}}),n(he,{colorScheme:t,onSelect:o,get children(){return e("home.toolbar.send_aria2")}})]}})]}})},Vo=Ae(()=>Fe(()=>import("./PackageDownload.6d263ca3.js"),["assets/PackageDownload.6d263ca3.js","assets/index.382b0bc7.js","assets/index.15d8d646.css"])),Bo=()=>{const e=x(),t=s=>{if(s==="package_download"){if(!on("package_download"))return;o()}};b.on("tool",t),E(()=>{b.off("tool",t)});const{isOpen:r,onOpen:o,onClose:a}=T(),[i,l]=B("pre_tips");return n(ae,{blockScrollOnMount:!1,get opened(){return r()},onClose:a,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[n(ne,{}),n(re,{get children(){return[n(Y,{get children(){return e("home.toolbar.package_download")}}),n(gt,{get fallback(){return n(je,{})},get children(){return n(M,{get when(){return i()==="pre_tips"},get fallback(){return n(Vo,{onClose:a})},get children(){return[n(oe,{get children(){const s=Lo.cloneNode(!0);return Ue(s,()=>e("home.toolbar.pre_package_download-tips")),s}}),n(fe,{display:"flex",gap:"$2",get children(){return[n(P,{onClick:a,colorScheme:"neutral",get children(){return e("global.cancel")}}),n(P,{colorScheme:"info",onClick:()=>{l("package_download")},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})};function hn(e,t){e.indexOf(t)===-1&&e.push(t)}function zo(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const fn=(e,t,r)=>Math.min(Math.max(r,e),t),U={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},Ee=e=>typeof e=="number",be=e=>Array.isArray(e)&&!Ee(e[0]),Ho=(e,t,r)=>{const o=t-e;return((r-e)%o+o)%o+e};function No(e,t){return be(e)?e[Ho(0,e.length,t)]:e}const mn=(e,t,r)=>-r*e+r*t+e,pn=()=>{},ee=e=>e,vt=(e,t,r)=>t-e===0?1:(r-e)/(t-e);function bn(e,t){const r=e[e.length-1];for(let o=1;o<=t;o++){const a=vt(0,t,o);e.push(mn(r,1,a))}}function Uo(e){const t=[0];return bn(t,e-1),t}function qo(e,t=Uo(e.length),r=ee){const o=e.length,a=o-t.length;return a>0&&bn(t,a),i=>{let l=0;for(;l<o-2&&!(i<t[l+1]);l++);let s=fn(0,1,vt(t[l],t[l+1],i));return s=No(r,l)(s),mn(e[l],e[l+1],s)}}const wn=e=>Array.isArray(e)&&Ee(e[0]),rt=e=>typeof e=="object"&&Boolean(e.createAnimation),Te=e=>typeof e=="function",Wo=e=>typeof e=="string",Ze={ms:e=>e*1e3,s:e=>e/1e3},vn=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Ko=1e-7,Go=12;function Jo(e,t,r,o,a){let i,l,s=0;do l=t+(r-t)/2,i=vn(l,o,a)-e,i>0?r=l:t=l;while(Math.abs(i)>Ko&&++s<Go);return l}function ke(e,t,r,o){if(e===t&&r===o)return ee;const a=i=>Jo(i,0,1,e,r);return i=>i===0||i===1?i:vn(a(i),t,o)}const Xo=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const o=r*e,a=t==="end"?Math.floor(o):Math.ceil(o);return fn(0,1,a/e)},Pt={ease:ke(.25,.1,.25,1),"ease-in":ke(.42,0,1,1),"ease-in-out":ke(.42,0,.58,1),"ease-out":ke(0,0,.58,1)},Zo=/\((.*?)\)/;function Dt(e){if(Te(e))return e;if(wn(e))return ke(...e);if(Pt[e])return Pt[e];if(e.startsWith("steps")){const t=Zo.exec(e);if(t){const r=t[1].split(",");return Xo(parseFloat(r[0]),r[1].trim())}}return ee}class Yo{constructor(t,r=[0,1],{easing:o,duration:a=U.duration,delay:i=U.delay,endDelay:l=U.endDelay,repeat:s=U.repeat,offset:c,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=ee,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((h,g)=>{this.resolve=h,this.reject=g}),o=o||U.easing,rt(o)){const h=o.createAnimation(r);o=h.easing,r=h.keyframes||r,a=h.duration||a}this.repeat=s,this.easing=be(o)?ee:Dt(o),this.updateDuration(a);const d=qo(r,c,be(o)?o.map(Dt):ee);this.tick=h=>{var g;i=i;let _=0;this.pauseTime!==void 0?_=this.pauseTime:_=(h-this.startTime)*this.rate,this.t=_,_/=1e3,_=Math.max(_-i,0),this.playState==="finished"&&this.pauseTime===void 0&&(_=this.totalDuration);const y=_/this.duration;let p=Math.floor(y),f=y%1;!f&&y>=1&&(f=1),f===1&&p--;const C=p%2;(u==="reverse"||u==="alternate"&&C||u==="alternate-reverse"&&!C)&&(f=1-f);const A=_>=this.totalDuration?1:Math.min(f,1),$=d(this.easing(A));t($),this.pauseTime===void 0&&(this.playState==="finished"||_>=this.totalDuration+l)?(this.playState="finished",(g=this.resolve)===null||g===void 0||g.call(this,$)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(t=this.reject)===null||t===void 0||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){this.pauseTime!==void 0||this.rate===0?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}class Qo{setAnimation(t){this.animation=t,t==null||t.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Ye=new WeakMap;function yn(e){return Ye.has(e)||Ye.set(e,{transforms:[],values:new Map}),Ye.get(e)}function ea(e,t){return e.has(t)||e.set(t,new Qo),e.get(t)}const ta=["","X","Y","Z"],na=["translate","scale","rotate","skew"],_e={x:"translateX",y:"translateY",z:"translateZ"},It={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},ra={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:It,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:ee},skew:It},Ce=new Map,Ke=e=>`--motion-${e}`,He=["x","y","z"];na.forEach(e=>{ta.forEach(t=>{He.push(e+t),Ce.set(Ke(e+t),ra[e])})});const oa=(e,t)=>He.indexOf(e)-He.indexOf(t),aa=new Set(He),yt=e=>aa.has(e),ia=(e,t)=>{_e[t]&&(t=_e[t]);const{transforms:r}=yn(e);hn(r,t),e.style.transform=_n(r)},_n=e=>e.sort(oa).reduce(sa,"").trim(),sa=(e,t)=>`${e} ${t}(var(${Ke(t)}))`,ot=e=>e.startsWith("--"),Lt=new Set;function la(e){if(!Lt.has(e)){Lt.add(e);try{const{syntax:t,initialValue:r}=Ce.has(e)?Ce.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:r})}catch{}}}const Qe=(e,t)=>document.createElement("div").animate(e,t),jt={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Qe({opacity:[1]})}catch{return!1}return!0},finished:()=>Boolean(Qe({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{Qe({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},et={},pe={};for(const e in jt)pe[e]=()=>(et[e]===void 0&&(et[e]=jt[e]()),et[e]);const ca=.015,ua=(e,t)=>{let r="";const o=Math.round(t/ca);for(let a=0;a<o;a++)r+=e(vt(0,o-1,a))+", ";return r.substring(0,r.length-2)},Vt=(e,t)=>Te(e)?pe.linearEasing()?`linear(${ua(e,t)})`:U.easing:wn(e)?da(e):e,da=([e,t,r,o])=>`cubic-bezier(${e}, ${t}, ${r}, ${o})`;function ga(e,t){for(let r=0;r<e.length;r++)e[r]===null&&(e[r]=r?e[r-1]:t());return e}const ha=e=>Array.isArray(e)?e:[e];function at(e){return _e[e]&&(e=_e[e]),yt(e)?Ke(e):e}const Me={get:(e,t)=>{t=at(t);let r=ot(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!r&&r!==0){const o=Ce.get(t);o&&(r=o.initialValue)}return r},set:(e,t,r)=>{t=at(t),ot(t)?e.style.setProperty(t,r):e.style[t]=r}};function fa(e,t=!0){if(!(!e||e.playState==="finished"))try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch{}}function ma(e,t){var r;let o=(t==null?void 0:t.toDefaultUnit)||ee;const a=e[e.length-1];if(Wo(a)){const i=((r=a.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";i&&(o=l=>l+i)}return o}function pa(){return window.__MOTION_DEV_TOOLS_RECORD}function ba(e,t,r,o={},a){const i=pa(),l=o.record!==!1&&i;let s,{duration:c=U.duration,delay:u=U.delay,endDelay:d=U.endDelay,repeat:h=U.repeat,easing:g=U.easing,direction:_,offset:y,allowWebkitAcceleration:p=!1}=o;const f=yn(e),C=yt(t);let A=pe.waapi();C&&ia(e,t);const $=at(t),S=ea(f.values,$),D=Ce.get($);return fa(S.animation,!(rt(g)&&S.generator)&&o.record!==!1),()=>{const K=()=>{var w,F;return(F=(w=Me.get(e,$))!==null&&w!==void 0?w:D==null?void 0:D.initialValue)!==null&&F!==void 0?F:0};let m=ga(ha(r),K);const v=ma(m,D);if(rt(g)){const w=g.createAnimation(m,t!=="opacity",K,$,S);g=w.easing,m=w.keyframes||m,c=w.duration||c}if(ot($)&&(pe.cssRegisterProperty()?la($):A=!1),C&&!pe.linearEasing()&&(Te(g)||be(g)&&g.some(Te))&&(A=!1),A){D&&(m=m.map(j=>Ee(j)?D.toDefaultUnit(j):j)),m.length===1&&(!pe.partialKeyframes()||l)&&m.unshift(K());const w={delay:Ze.ms(u),duration:Ze.ms(c),endDelay:Ze.ms(d),easing:be(g)?void 0:Vt(g,c),direction:_,iterations:h+1,fill:"both"};s=e.animate({[$]:m,offset:y,easing:be(g)?g.map(j=>Vt(j,c)):void 0},w),s.finished||(s.finished=new Promise((j,Pe)=>{s.onfinish=j,s.oncancel=Pe}));const F=m[m.length-1];s.finished.then(()=>{Me.set(e,$,F),s.cancel()}).catch(pn),p||(s.playbackRate=1.000001)}else if(a&&C)m=m.map(w=>typeof w=="string"?parseFloat(w):w),m.length===1&&m.unshift(parseFloat(K())),s=new a(w=>{Me.set(e,$,v?v(w):w)},m,Object.assign(Object.assign({},o),{duration:c,easing:g}));else{const w=m[m.length-1];Me.set(e,$,D&&Ee(w)?D.toDefaultUnit(w):w)}return l&&i(e,t,m,{duration:c,delay:u,easing:g,repeat:h,offset:y},"motion-one"),S.setAnimation(s),s}}const wa=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function va(e,t){var r;return typeof e=="string"?t?((r=t[e])!==null&&r!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}function Cn(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r}const ya={any:0,all:1};function _a(e,t,{root:r,margin:o,amount:a="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const i=va(e),l=new WeakMap,s=u=>{u.forEach(d=>{const h=l.get(d.target);if(d.isIntersecting!==Boolean(h))if(d.isIntersecting){const g=t(d);Te(g)?l.set(d.target,g):c.unobserve(d.target)}else h&&(h(d),l.delete(d.target))})},c=new IntersectionObserver(s,{root:r,rootMargin:o,threshold:typeof a=="number"?a:ya[a]});return i.forEach(u=>c.observe(u)),()=>c.disconnect()}function Ca(e,t){return typeof e!=typeof t?!0:Array.isArray(e)&&Array.isArray(t)?!$a(e,t):e!==t}function $a(e,t){const r=t.length;if(r!==e.length)return!1;for(let o=0;o<r;o++)if(t[o]!==e[o])return!1;return!0}function Sa(e){return typeof e=="object"}function Bt(e,t){if(Sa(e))return e;if(e&&t)return t[e]}let te;function xa(){if(!te)return;const e=te.sort(Ma).map(Oa);e.forEach(zt),e.forEach(zt),te=void 0}function tt(e){te?hn(te,e):(te=[e],requestAnimationFrame(xa))}function ka(e){te&&zo(te,e)}const Ma=(e,t)=>e.getDepth()-t.getDepth(),Oa=e=>e.animateUpdates(),zt=e=>e.next(),Ht=(e,t)=>new CustomEvent(e,{detail:{target:t}});function it(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEvent:r}}))}function Nt(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEntry:r}}))}const Ea={isActive:e=>Boolean(e.inView),subscribe:(e,{enable:t,disable:r},{inViewOptions:o={}})=>{const{once:a}=o,i=Cn(o,["once"]);return _a(e,l=>{if(t(),Nt(e,"viewenter",l),!a)return s=>{r(),Nt(e,"viewleave",s)}},i)}},Ut=(e,t,r)=>o=>{o.pointerType&&o.pointerType!=="mouse"||(r(),it(e,t,o))},Ta={isActive:e=>Boolean(e.hover),subscribe:(e,{enable:t,disable:r})=>{const o=Ut(e,"hoverstart",t),a=Ut(e,"hoverend",r);return e.addEventListener("pointerenter",o),e.addEventListener("pointerleave",a),()=>{e.removeEventListener("pointerenter",o),e.removeEventListener("pointerleave",a)}}},Aa={isActive:e=>Boolean(e.press),subscribe:(e,{enable:t,disable:r})=>{const o=i=>{r(),it(e,"pressend",i),window.removeEventListener("pointerup",o)},a=i=>{t(),it(e,"pressstart",i),window.addEventListener("pointerup",o)};return e.addEventListener("pointerdown",a),()=>{e.removeEventListener("pointerdown",a),window.removeEventListener("pointerup",o)}}},Ie={inView:Ea,hover:Ta,press:Aa},qt=["initial","animate",...Object.keys(Ie),"exit"],st=new WeakMap;function Fa(e={},t){let r,o=t?t.getDepth()+1:0;const a={initial:!0,animate:!0},i={},l={};for(const p of qt)l[p]=typeof e[p]=="string"?e[p]:t==null?void 0:t.getContext()[p];const s=e.initial===!1?"animate":"initial";let c=Bt(e[s]||l[s],e.variants)||{},u=Cn(c,["transition"]);const d=Object.assign({},u);function*h(){var p,f;const C=u;u={};const A={};for(const m of qt){if(!a[m])continue;const v=Bt(e[m]);if(!!v)for(const w in v)w!=="transition"&&(u[w]=v[w],A[w]=wa((f=(p=v.transition)!==null&&p!==void 0?p:e.transition)!==null&&f!==void 0?f:{},w))}const $=new Set([...Object.keys(u),...Object.keys(C)]),S=[];$.forEach(m=>{var v;u[m]===void 0&&(u[m]=d[m]),Ca(C[m],u[m])&&((v=d[m])!==null&&v!==void 0||(d[m]=Me.get(r,m)),S.push(ba(r,m,u[m],A[m],Yo)))}),yield;const D=S.map(m=>m()).filter(Boolean);if(!D.length)return;const K=u;r.dispatchEvent(Ht("motionstart",K)),Promise.all(D.map(m=>m.finished)).then(()=>{r.dispatchEvent(Ht("motioncomplete",K))}).catch(pn)}const g=(p,f)=>()=>{a[p]=f,tt(y)},_=()=>{for(const p in Ie){const f=Ie[p].isActive(e),C=i[p];f&&!C?i[p]=Ie[p].subscribe(r,{enable:g(p,!0),disable:g(p,!1)},e):!f&&C&&(C(),delete i[p])}},y={update:p=>{!r||(e=p,_(),tt(y))},setActive:(p,f)=>{!r||(a[p]=f,tt(y))},animateUpdates:h,getDepth:()=>o,getTarget:()=>u,getOptions:()=>e,getContext:()=>l,mount:p=>(r=p,st.set(r,y),_(),()=>{st.delete(r),ka(y);for(const f in i)i[f]()}),isMounted:()=>Boolean(r)};return y}function Ra(e){const t={},r=[];for(let o in e){const a=e[o];yt(o)&&(_e[o]&&(o=_e[o]),r.push(o),o=Ke(o));let i=Array.isArray(a)?a[0]:a;const l=Ce.get(o);l&&(i=Ee(a)?l.toDefaultUnit(a):a),t[o]=i}return r.length&&(t.transform=_n(r)),t}const Pa={initial:()=>!0,addCleanup:E,addMount:bt},lt=an(),$n=an(Pa);function Da(e,t,r,o){const{addCleanup:a,addMount:i,initial:l}=r,s=Fa(l()?t():{...t(),initial:!1},o);return i(Yn.bind(void 0,Qn(),()=>{a(s.mount(e())),ct(()=>s.update(t()))})),s}const Ia=/([^:; ]*):\s*([^;]*)/g;function Wt(e){const t={};let r;for(;r=Ia.exec(e);)t[r[1]]=r[2];return t}function La(e,t){if(typeof e=="object"&&typeof t=="object")return{...e,...t};if(typeof e=="string"&&typeof t=="string")return`${e};${t}`;const r=typeof e=="object"?e:Wt(e),o=typeof t=="object"?t:Wt(t);return{...r,...o}}const Kt=e=>{const[t,,r]=er(e,["initial","animate","inView","inViewOptions","hover","press","variants","transition","exit"],["tag","ref","style","onMotionStart","onMotionComplete","onHoverStart","onHoverEnd","onPressStart","onPressEnd","onViewEnter","onViewLeave"]),o=Da(()=>i,()=>({...t}),$t($n),$t(lt)),a=Ra(o.getTarget());let i;return n(lt.Provider,{value:o,get children(){return n(tn,ye({ref:l=>{var s;i=l,(s=e.ref)==null||s.call(e,l)},get component(){return sn(()=>e.tag||"div")},get style(){return Z(()=>!!e.style,!0)()?La(e.style,a):a},get["on:motionstart"](){return e.onMotionStart},get["on:motioncomplete"](){return e.onMotionComplete},get["on:hoverstart"](){return e.onHoverStart},get["on:hoverend"](){return e.onHoverEnd},get["on:pressstart"](){return e.onPressStart},get["on:pressend"](){return e.onPressEnd},get["on:viewenter"](){return e.onViewEnter},get["on:viewleave"](){return e.onViewLeave}},r))}})},_t=new Proxy(Kt,{get:(e,t)=>r=>(delete r.tag,n(Kt,ye(r,{tag:t})))}),ja=e=>(e=Array.isArray(e)?e[0]:e,e instanceof Element?e:void 0),Va=(e,t)=>{const r={once:!0};e.addEventListener("motioncomplete",t,r),E(e.removeEventListener.bind(e,"motioncomplete",t,r))},Ba=e=>{let{initial:t=!0}=e;bt(()=>t=!0);let r=!1,o=[],a=[],i=[];return E(()=>{i.concat(a).forEach(l=>l()),a=i=o=[]}),n($n.Provider,{value:{addCleanup:l=>a.push(l),addMount:l=>o.push(l),initial:()=>t},get children(){return n(lt.Provider,{value:void 0,get children(){return sn(()=>{const l=tr(()=>e.children),s=me(()=>ja(l())),[c,u]=B(),[d,h]=B();return nr(dt(s,y=>{i.push(...a),a=[],rr(()=>{e.exitBeforeEnter?(u(),_(()=>!r&&g(y))):(g(y),_())})})),[c,d];function g(y){u(y),o.forEach(p=>p()),o=[]}function _(y){var A;const p=()=>{h(),i.forEach($=>$()),i=[],y==null||y()},f=h((A=c())!=null?A:d());if(!f)return p();const C=st.get(f);if(!C||!C.getOptions().exit)return p();C.setActive("exit",r=!0),Va(f,()=>{r=!1,p()})}})}})}})},za=()=>{const e=me(()=>[R.Folder,R.FetchingMore].includes(k.state)&&or()&&ar());return n(Ba,{exitBeforeEnter:!0,get children(){return n(M,{get when(){return e()},get children(){return n(we,{class:"center-toolbar",pos:"fixed",bottom:"$4",right:"50%",w:"max-content",color:"$neutral11",get as(){return _t.div},initial:{opacity:0,scale:.9,x:"50% ",y:10},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:.9},transition:{duration:.2},get children(){return n(z,{p:"$2",get bgColor(){return Oe("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(8px)"},get children(){return[n($e,{each:["rename","move","copy","delete"],children:t=>n(ze,{name:t,onClick:()=>{b.emit("tool",t)}})}),n(Io,{}),n(jo,{}),n(ze,{name:"cancel_select",onClick:()=>{ir(!1)}})]}})}})}})}})},Ha=()=>{const{isOpen:e,onToggle:t}=T({defaultIsOpen:localStorage.getItem("more-open")==="true",onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),r=me(()=>e()?"$4":"$5"),o=me(()=>k.state===R.Folder),{refresh:a}=H();return n(we,{class:"left-toolbar-box",pos:"fixed",get right(){return r()},get bottom(){return r()},get children(){return n(M,{get when(){return e()},get fallback(){return n(V,{get color(){return O()},class:"toolbar-toggle",as:Ot,onClick:()=>{t()}})},get children(){return n(ie,{class:"left-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return _t.div},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},get children(){return[n(ie,{spacing:"$1",class:"left-toolbar-in",get children(){return[n(M,{get when(){return Z(()=>!!o(),!0)()&&(St("write")||k.write)},get children(){return[n(V,{get color(){return O()},as:eo,tips:"refresh",onClick:()=>{a(void 0,!0)}}),n(V,{get color(){return O()},get as(){return Q.new_file.icon},tips:"new_file",onClick:()=>{b.emit("tool","new_file")}}),n(V,{get color(){return O()},get as(){return Q.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{b.emit("tool","mkdir")}}),n(V,{get color(){return O()},get as(){return Q.recursive_move.icon},tips:"recursive_move",onClick:()=>{b.emit("tool","recursiveMove")}}),n(V,{get color(){return O()},get as(){return Q.remove_empty_directory.icon},tips:"remove_empty_directory",onClick:()=>{b.emit("tool","removeEmptyDirectory")}}),n(V,{get color(){return O()},get as(){return Q.batch_rename.icon},tips:"batch_rename",onClick:()=>{b.emit("tool","batchRename")}}),n(V,{get color(){return O()},as:sr,tips:"upload",onClick:()=>{b.emit("tool","upload")}})]}}),n(M,{get when(){return Z(()=>!!o(),!0)()&&St("offline_download")},get children(){return n(V,{get color(){return O()},as:lr,pl:"0",tips:"offline_download",onClick:()=>{b.emit("tool","offline_download")}})}}),n(V,{get color(){return O()},tips:"toggle_checkbox",as:To,onClick:cr}),n(V,{get color(){return O()},as:ur,tips:"local_settings",onClick:()=>{b.emit("tool","local_settings")}})]}}),n(V,{get color(){return O()},tips:"more",as:Ot,onClick:t})]}})}})}})},Na=()=>{const{isOpen:e,onOpen:t,onClose:r}=T(),[o,a]=W(dr),{pathname:i}=L(),{refresh:l}=H(),s=c=>{c==="copy"&&t()};return b.on("tool",s),E(()=>{b.off("tool",s)}),n(wt,{get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async c=>{const u=await a(i(),c,ge().map(d=>d.name));J(u,()=>{l(),r()})}})},Ua=()=>{const{isOpen:e,onOpen:t,onClose:r}=T(),[o,a]=W(gr),{pathname:i}=L(),{refresh:l}=H(),s=c=>{c==="move"&&t()};return b.on("tool",s),E(()=>{b.off("tool",s)}),n(wt,{get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async c=>{const u=await a(i(),c,ge().map(d=>d.name));J(u,()=>{l(),r()})}})},qa=Re("<p></p>"),Wa=()=>{const e=x(),{isOpen:t,onOpen:r,onClose:o}=T(),[a,i]=W(hr),{refresh:l}=H(),{pathname:s}=L(),c=u=>{u==="delete"&&r()};return b.on("tool",c),E(()=>{b.off("tool",c)}),n(ae,{blockScrollOnMount:!1,get opened(){return t()},onClose:o,size:{"@initial":"xs","@md":"md"},get children(){return[n(ne,{}),n(re,{get children(){return[n(Y,{get children(){return e("home.toolbar.delete")}}),n(oe,{get children(){const u=qa.cloneNode(!0);return Ue(u,()=>e("home.toolbar.delete-tips")),u}}),n(fe,{display:"flex",gap:"$2",get children(){return[n(P,{onClick:o,colorScheme:"neutral",get children(){return e("global.cancel")}}),n(P,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const u=await i(s(),ge().map(d=>d.name));J(u,()=>{l(),o()})},get children(){return e("global.confirm")}})]}})]}})]}})},Ka=()=>{const{isOpen:e,onOpen:t,onClose:r}=T(),o=x(),[a,i]=W(fr),{pathname:l}=L(),{refresh:s}=H(),c=u=>{if(u==="rename"){if(!mr()){N.warning(o("home.toolbar.only_one-tips"));return}t()}};return b.on("tool",c),E(()=>{b.off("tool",c)}),n(M,{get when(){return e()},get children(){return n(qe,{title:"home.toolbar.input_new_name",get isRenamingFile(){return!ge()[0].is_dir},get opened(){return e()},onClose:r,get defaultValue(){var u,d;return(d=(u=ge()[0])==null?void 0:u.name)!=null?d:""},get loading(){return a()},onSubmit:async u=>{const d=await i(le(l(),ge()[0].name),u);J(d,()=>{s(),r()})}})}})},Ga=()=>{const{isOpen:e,onOpen:t,onClose:r}=T(),[o,a]=W(pr),{refresh:i}=H(),{pathname:l}=L(),s=c=>{c==="new_file"&&t()};return b.on("tool",s),E(()=>{b.off("tool",s)}),n(qe,{title:"home.toolbar.input_filename",get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async c=>{const u=await a(le(l(),c),Yt());J(u,()=>{i(),r()})}})},Ja=()=>{const{isOpen:e,onOpen:t,onClose:r}=T(),[o,a]=W(br),{pathname:i}=L(),{refresh:l}=H(),s=c=>{c==="mkdir"&&t()};return b.on("tool",s),E(()=>{b.off("tool",s)}),n(qe,{title:"home.toolbar.input_dir_name",get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async c=>{const u=await a(le(i(),c));J(u,()=>{l(),r()})}})},Xa=Re("<p></p>"),Za=()=>{const{isOpen:e,onOpen:t,onClose:r}=T(),{isOpen:o,onOpen:a,onClose:i}=T(),[l,s]=W(wr),{pathname:c}=L(),{refresh:u}=H(),d=g=>{g==="recursiveMove"&&t()};b.on("tool",d),E(()=>{b.off("tool",d)});const h=x();return[n(ae,{blockScrollOnMount:!1,get opened(){return e()},onClose:()=>r(),size:{"@initial":"xs","@md":"md"},get children(){return[n(ne,{}),n(re,{get children(){return[n(Y,{get children(){return h("home.toolbar.recursive_move")}}),n(oe,{get children(){const g=Xa.cloneNode(!0);return Ue(g,()=>h("home.toolbar.recursive_move_directory-tips")),g}}),n(fe,{display:"flex",gap:"$2",get children(){return[n(P,{onClick:()=>r(),colorScheme:"neutral",get children(){return h("global.cancel")}}),n(P,{onClick:()=>{r(),a()},colorScheme:"danger",get children(){return h("global.confirm")}})]}})]}})]}}),n(wt,{get opened(){return o()},onClose:i,get loading(){return l()},onSubmit:async g=>{const _=await s(c(),g);J(_,()=>{u(),i()})}})]},Ya=Re("<p></p>"),Qa=()=>{const{isOpen:e,onOpen:t,onClose:r}=T(),{pathname:o}=L(),[a,i]=W(vr),{refresh:l}=H(),s=u=>{u==="removeEmptyDirectory"&&t()};b.on("tool",s),E(()=>{b.off("tool",s)});const c=x();return n(ae,{blockScrollOnMount:!1,get opened(){return e()},onClose:r,size:{"@initial":"xs","@md":"md"},get children(){return[n(ne,{}),n(re,{get children(){return[n(Y,{get children(){return c("home.toolbar.remove_empty_directory")}}),n(oe,{get children(){const u=Ya.cloneNode(!0);return Ue(u,()=>c("home.toolbar.remove_empty_directory-tips")),u}}),n(fe,{display:"flex",gap:"$2",get children(){return[n(P,{onClick:r,colorScheme:"neutral",get children(){return c("global.cancel")}}),n(P,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const u=await i(o());J(u,()=>{l(),r()})},get children(){return c("global.confirm")}})]}})]}})]}})},ei=e=>n(_t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return n(z,{class:"list-item",w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:ut()}},get children(){return[n(ve,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.src_name},get children(){return e.obj.src_name}}),n(ve,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.new_name},get children(){return e.obj.new_name}})]}})}}),ti=()=>{const{isOpen:e,onOpen:t,onClose:r}=T(),{isOpen:o,onOpen:a,onClose:i}=T(),[l,s]=W(yr),{pathname:c}=L(),{refresh:u}=H(),[d,h]=B("1"),[g,_]=B(""),[y,p]=B(""),[f,C]=B("string"),[A,$]=B([]),S=x(),D=()=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:"left",cursor:"pointer"}),K=v=>{v==="batchRename"&&a()};b.on("tool",K),E(()=>{b.off("tool",K)});const m=()=>{if(!g()||!y()){N.warning(S("global.empty_input"));return}const v=new RegExp(g(),"g");let w;if(d()==="1")w=k.objs.filter(F=>F.name.match(g())).map(F=>({src_name:F.name,new_name:F.name.replace(v,y())}));else{let F=y();w=k.objs.map(j=>{let Pe="";const Ct=j.name.lastIndexOf(".");Ct!==-1&&(Pe=j.name.substring(Ct+1));const Sn={src_name:j.name,new_name:g()+F+"."+Pe};return F=(parseInt(F)+1).toString().padStart(F.length,"0"),Sn})}$(w),t(),i()};return[n(ae,{blockScrollOnMount:!1,get opened(){return o()},onClose:i,initialFocus:"#modal-input1",size:{"@initial":"xs","@md":"md"},get children(){return[n(ne,{}),n(re,{get children(){return[n(M,{get when(){return d()==="1"},get children(){return n(Y,{get children(){return S("home.toolbar.regular_rename")}})}}),n(M,{get when(){return d()==="2"},get children(){return n(Y,{get children(){return S("home.toolbar.sequential_renaming_desc")}})}}),n(oe,{get children(){return[n(_r,{defaultValue:"1",style:{margin:"20px 0"},onChange:v=>{h(v),v==="1"?C("string"):v==="2"&&C("number")},get children(){return n(z,{spacing:"$4",get children(){return[n(xt,{value:"1",get children(){return S("home.toolbar.regex_rename")}}),n(xt,{value:"2",get children(){return S("home.toolbar.sequential_renaming")}})]}})}}),n(ie,{spacing:"$2",get children(){return[n(Le,{id:"modal-input1",type:"string",get value(){return g()},onInput:v=>{_(v.currentTarget.value)},onKeyDown:v=>{v.key==="Enter"&&m()}}),n(Le,{id:"modal-input2",get type(){return f()},get value(){return y()},onInput:v=>{p(v.currentTarget.value)},onKeyDown:v=>{v.key==="Enter"&&m()}})]}})]}}),n(fe,{display:"flex",gap:"$2",get children(){return[n(P,{onClick:()=>{h("1"),C("string"),i()},colorScheme:"neutral",get children(){return S("global.cancel")}}),n(P,{onClick:()=>m(),get disabled(){return!g()||!y()},get children(){return S("global.ok")}})]}})]}})]}}),n(ae,{size:"xl",get opened(){return e()},onClose:r,get children(){return[n(ne,{}),n(re,{get children(){return[n(Y,{get children(){return S("home.toolbar.regex_rename_preview")}}),n(oe,{get children(){return n(ie,{class:"list",w:"$full",spacing:"$1",get children(){return[n(z,{class:"title",w:"$full",p:"$2",get children(){return[n(ve,ye({w:{"@initial":"50%","@md":"50%"}},D,{get children(){return S("home.toolbar.regex_rename_preview_old_name")}})),n(ve,ye({w:{"@initial":"50%","@md":"50%"}},D,{get children(){return S("home.toolbar.regex_rename_preview_new_name")}}))]}}),n($e,{get each(){return A()},children:(v,w)=>n(ei,{obj:v,get index(){return w()}})})]}})}}),n(fe,{display:"flex",gap:"$2",get children(){return[n(P,{onClick:()=>{$([]),h("1"),C("string"),r(),i()},colorScheme:"neutral",get children(){return S("global.cancel")}}),n(P,{onClick:()=>{$([]),r(),a()},colorScheme:"neutral",get children(){return S("global.back")}}),n(P,{get loading(){return l()},onClick:async()=>{const v=await s(c(),A());J(v,()=>{$([]),_(""),p(""),h("1"),C("string"),u(),i(),r()})},get disabled(){return A().length==0},get children(){return S("global.ok")}})]}})]}})]}})]},ni=["delete_on_upload_succeed","delete_on_upload_failed","delete_never","delete_always"],ri=()=>{const e=x(),[t,r]=B([]),[o,a]=W(()=>Cr.get("/public/offline_download_tools")),[i,l]=B(""),[s,c]=B("delete_on_upload_succeed");bt(async()=>{const f=await a();$r(f,C=>{r(C),l(C[0])})});const{isOpen:u,onOpen:d,onClose:h}=T(),[g,_]=W(Sr),{pathname:y}=L(),p=f=>{f==="offline_download"&&d()};return b.on("tool",p),E(()=>{b.off("tool",p)}),n(qe,{title:"home.toolbar.offline_download",type:"text",get opened(){return u()},onClose:h,get loading(){return o()||g()},get tips(){return e("home.toolbar.offline_download-tips")},get topSlot(){return n(we,{mb:"$2",get children(){return n(kt,{get value(){return i()},onChange:f=>l(f),get options(){return t().map(f=>({value:f,label:f}))}})}})},get bottomSlot(){return n(we,{mb:"$2",get children(){return n(kt,{get value(){return s()},onChange:f=>c(f),get options(){return ni.map(f=>({value:f,label:e(`home.toolbar.delete_policy.${f}`)}))}})}})},onSubmit:async f=>{const C=await _(y(),f.split(`
`),i(),s());J(C,()=>{h()})}})},oi=e=>{const t=x(),r=l=>{l===e.name&&a()};b.on("tool",r),E(()=>{b.off("tool",r)});const{isOpen:o,onOpen:a,onClose:i}=T();return n(ae,{get blockScrollOnMount(){return e.blockScrollOnMount},get opened(){return o()},onClose:i,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[n(ne,{}),n(re,{get children(){return[n(xr,{}),n(Y,{get children(){return t(e.title)}}),n(oe,{get children(){return n(M,{get when(){return o()},get children(){return n(gt,{get fallback(){return n(je,{})},get children(){return e.children}})}})}})]}})]}})};function ai(e){const t=x();return n(Wr,{get children(){return[n(Dr,{get children(){return t(`home.local_settings.${e.key}`)}}),n(Ne,{get fallback(){return n(Le,{get value(){return nt[e.key]},onInput:r=>{Mt(e.key,r.currentTarget.value)}})},get children(){return n(G,{get when(){return e.type==="select"},get children(){return n(Ir,{get id(){return e.key},get defaultValue(){return nt[e.key]},onChange:r=>Mt(e.key,r),get children(){return[n(Lr,{get children(){return[n(jr,{get children(){return t("global.choose")}}),n(Vr,{}),n(Br,{})]}}),n(zr,{get children(){return n(Hr,{get children(){return n($e,{get each(){return e.options},children:r=>n(Nr,{value:r,get children(){return[n(Ur,{get children(){return t(`home.local_settings.${e.key}_options.${r}`)}}),n(qr,{})]}})})}})}})]}})}})}})]}})}const ii=()=>{const{isOpen:e,onOpen:t,onClose:r}=T(),o=x(),a=i=>{i==="local_settings"&&t()};return b.on("tool",a),E(()=>{b.off("tool",a)}),n(Pr,{get opened(){return e()},placement:"right",onClose:r,get children(){return[n(kr,{}),n(Mr,{get children(){return[n(Or,{}),n(Er,{color:"$info9",get children(){return o("home.toolbar.local_settings")}}),n(Tr,{get children(){return[n(ie,{spacing:"$2",get children(){return n($e,{each:Ar,children:i=>n(ai,i)})}}),n(nn,{mt:"$4",get children(){return n(z,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[n(Fr,{}),n(Rr,{})]}})}})]}})]}})]}})},si=Ae(()=>Fe(()=>import("./Upload.47f26b16.js"),["assets/Upload.47f26b16.js","assets/index.382b0bc7.js","assets/index.15d8d646.css","assets/index.29fef1ef.js"])),li=()=>[n(Na,{}),n(Ua,{}),n(Ka,{}),n(Wa,{}),n(Ga,{}),n(Ja,{}),n(Za,{}),n(Qa,{}),n(ti,{}),n(ri,{}),n(Bo,{}),n(oi,{name:"upload",title:"home.toolbar.upload",get children(){return n(si,{})}}),n(ii,{})],ci=()=>n(Kr,{get children(){return[n(Ha,{}),n(za,{}),n(li,{})]}}),ui=()=>{Xr(q("site_title"));const e=q("announcement");return e&&N.render(()=>n(en,{children:e})),[n(Eo,{}),n(ci,{}),n(po,{}),n(wo,{})]},wi=Object.freeze(Object.defineProperty({__proto__:null,default:ui},Symbol.toStringTag,{value:"Module"}));export{bi as I,wi as L,_t as M,pi as T,Oo as i,Q as o,co as u};
