System.register(["./index-legacy.ee191362.js","./useT-legacy.12f209d1.js","./useTitle-legacy.0dfb8acc.js","./index-legacy.384d4e11.js"],(function(e,r){"use strict";var n,t,a,c,s,u,i,l,g,o,d,h,p,m,f,b,$,w,_,y,v,I,x,j,k,C,T,S,R,U,Z;return{setters:[e=>{n=e.u,t=e.q,a=e.ab,c=e.a,s=e.b4,u=e.f,i=e.x,l=e.aa,g=e.bZ,o=e.b_,d=e.b$,h=e.c0,p=e.a8,m=e.bc,f=e.bf,b=e.c1,$=e.a$,w=e.aZ,_=e.I,y=e.F,v=e.B,I=e.bd,x=e.c2,j=e.n,k=e.E,C=e.ak,T=e.a3,S=e.bt},e=>{R=e.u},e=>{U=e.b},e=>{Z=e.L}],execute:function(){const r=e=>u(S,{get colorScheme(){return e.can?"success":"danger"},get children(){return e.children}});e("default",(()=>{const e=R();U("manage.sidemenu.profile");const{to:S}=n(),[q,B]=t(a().username),[D,E]=t(""),[F,L]=c((()=>s.post("/me/update",{username:q(),password:D()})));return u(T,{w:"$full",spacing:"$4",alignItems:"start",get children(){return[u(i,{get when(){return!l.is_guest(a())},get fallback(){return[u(g,{status:"warning",flexDirection:{"@initial":"column","@lg":"row"},get children(){return[u(o,{mr:"$2_5"}),u(d,{mr:"$2_5",get children(){return e("users.guest-tips")}}),u(h,{get children(){return e("users.modify_nothing")}})]}}),u(p,{spacing:"$2",get children(){return[u(m,{get children(){return e("global.have_account")}}),u(m,{color:"$info9",as:Z,get href(){return`/@login?redirect=${encodeURIComponent(location.pathname)}`},get children(){return e("global.go_login")}})]}})]},get children(){return[u(f,{get children(){return e("users.update_profile")}}),u(b,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[u($,{get children(){return[u(w,{for:"username",get children(){return e("users.change_username")}}),u(_,{id:"username",get value(){return q()},onInput:e=>{B(e.currentTarget.value)}})]}}),u($,{get children(){return[u(w,{for:"password",get children(){return e("users.change_password")}}),u(_,{id:"password",type:"password",placeholder:"********",get value(){return D()},onInput:e=>{E(e.currentTarget.value)}}),u(y,{get children(){return e("users.change_password-tips")}})]}})]}}),u(p,{spacing:"$2",get children(){return[u(v,{get loading(){return F()},onClick:async()=>{const r=await L();I(r,(()=>{x({...a(),username:q()}),j.success(e("users.update_profile_success")),S(`/@login?redirect=${encodeURIComponent(location.pathname)}`)}))},get children(){return e("global.save")}}),u(i,{get when(){return!a().otp},get children(){return u(v,{colorScheme:"accent",onClick:()=>{S("/@manage/2fa")},get children(){return e("users.enable_2fa")}})}})]}})]}}),u(p,{wrap:"wrap",gap:"$2",mt:"$2",get children(){return u(k,{each:C,children:(n,t)=>u(r,{get can(){return l.can(a(),t())},get children(){return e(`users.permissions.${n}`)}})})}})]}})}))}}}));
