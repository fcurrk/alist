import{bJ as M,b as z,h as t,ae as f,L as v,aO as h,ag as D,dt as x,t as $,aQ as p,S as A,aA as L,an as P,az as C,af as o,ck as _,cR as B,ad as E,l as T,a as W,m as S,x as H,du as K,dv as R,dw as F,E as j,G,a1 as q,a4 as J}from"./index.9b78fa9f.js";import{b as Q}from"./Folder.f8971665.js";import{u as U}from"./index.20f512e4.js";import{q as V}from"./index.1bbe8a05.js";import{g as N,O as X}from"./icon.14a6cef7.js";import{u as Y,I as O,a as I}from"./helper.57e497ff.js";import"./Layout.b7134346.js";import"./useTitle.3242060b.js";import"./FolderTree.b92c2ff2.js";import"./video_box.860170d2.js";import"./_commonjs-dynamic-modules.30ae7933.js";import"./Paginator.93f7b371.js";import"./index.3cbf9a2f.js";import"./index.e76add6d.js";const r=[{name:"name",textAlign:"left",w:{"@initial":"76%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"24%","@md":"17%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"33%"}}],Z=e=>{const{isHide:s}=M();if(s(e.obj))return null;const{setPathAs:b}=U(),{show:m}=Q({id:1}),{pushHref:l,to:a}=z(),{isMouseSupported:c}=I(),d=Y(),u=()=>T.list_item_filename_overflow;return t(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return t(f,{get classList(){return{selected:!!e.obj.selected}},class:"list-item viselect-item",get["data-index"](){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:v()}},as:V,get href(){return e.obj.name},get cursor(){return!c()&&(!h()||d())?"pointer":"default"},get bgColor(){return D(()=>!!e.obj.selected,!0)()?v():void 0},"on:dblclick":n=>{!c()||n.ctrlKey||n.metaKey||n.shiftKey||a(l(e.obj.name))},"on:click":n=>{if(c())return n.preventDefault();if(!!h()){if(n.preventDefault(),d()){a(l(e.obj.name));return}x(e.index,!e.obj.selected)}},onMouseEnter:()=>{b(e.obj.name,e.obj.is_dir,!0)},onContextMenu:n=>{$(()=>{p(!1),x(e.index,!0,!0)}),m(n,{props:e.obj})},get children(){return[t(f,{class:"name-box",spacing:"$1",get w(){return r[0].w},get children(){return[t(A,{get when(){return h()},get children(){return t(O,{"on:click":n=>{n.stopPropagation()},get checked(){return e.obj.selected},onChange:n=>{x(e.index,n.target.checked)}})}}),t(L,{class:"icon",boxSize:"$6",get color(){return P()},get as(){return N(e.obj)},mr:"$1","on:click":n=>{e.obj.type===X.IMAGE&&(n.stopPropagation(),n.preventDefault(),C.emit("gallery",e.obj.name))}}),t(o,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:u()==="multi_line"?"unset":"nowrap","overflow-x":u()==="scrollable"?"auto":"hidden",textOverflow:u()==="ellipsis"?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),t(o,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return _(e.obj.size)}}),t(o,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return r[2].w},get textAlign(){return r[2].textAlign},get children(){return B(e.obj.modified)}})]}})}})},fe=()=>{const e=W(),[s,b]=S(),[m,l]=S(!1);H(()=>{s()&&K(s(),m())});const a=i=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:i.textAlign,cursor:"pointer",onClick:()=>{i.name===s()?l(!m()):$(()=>{b(i.name),l(!1)})}}),c=i=>{var k,y;const g=Array.from((y=(k=i.dataTransfer)==null?void 0:k.items)!=null?y:[]);for(let w=0;w<g.length;w++)if(g[w].kind==="file"){C.emit("tool","upload"),i.preventDefault();break}},{isMouseSupported:d,registerSelectContainer:u,captureContentMenu:n}=I();return u(),t(J,{onDragOver:c,"oncapture:contextmenu":n,get classList(){return{"viselect-container":d()}},class:"list",w:"$full",spacing:"$1",get children(){return[t(f,{class:"title",w:"$full",p:"$2",get children(){return[t(f,{get w(){return r[0].w},spacing:"$1",get children(){return[t(A,{get when(){return h()},get children(){return t(O,{get checked(){return R()},get indeterminate(){return F()},onChange:i=>{p(i.target.checked)}})}}),t(o,j(()=>a(r[0]),{get children(){return e(`home.obj.${r[0].name}`)}}))]}}),t(o,j({get w(){return r[1].w}},()=>a(r[1]),{get children(){return e(`home.obj.${r[1].name}`)}})),t(o,j({get w(){return r[2].w}},()=>a(r[2]),{display:{"@initial":"none","@md":"inline"},get children(){return e(`home.obj.${r[2].name}`)}}))]}}),t(G,{get each(){return q.objs},children:(i,g)=>t(Z,{obj:i,get index(){return g()}})})]}})};export{fe as default};
