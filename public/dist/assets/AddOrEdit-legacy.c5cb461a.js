System.register(["./index-legacy.8b6725bf.js","./FolderTree-legacy.cb9973eb.js","./useT-legacy.824d4e9b.js","./index-legacy.1c9d1dc8.js","./api-legacy.0eba5e3d.js"],(function(e,r){"use strict";var n,t,a,s,l,i,u,c,d,o,g,p,h,m,f,b,w,y,x,$,I;return{setters:[e=>{n=e.u,t=e.br,a=e.a,s=e.b6,l=e.f,i=e.a3,u=e.bf,c=e.b1,d=e.a$,o=e.I,g=e.bg,p=e.E,h=e.an,m=e.ab,f=e.B,b=e.bd,w=e.n,y=e.a6,x=e.bq},e=>{$=e.F},e=>{I=e.u},()=>{},()=>{}],execute:function(){const r=e=>{const r=I();return l(c,{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:"$2",rounded:"$md",shadow:"$md",p:"$2",w:"fit-content",get children(){return[l(d,{mb:"0",get children(){return r(`users.permissions.${e.name}`)}}),l(x,{get checked(){return e.can},onChange:()=>e.onChange(!e.can)})]}})};e("default",(()=>{const e=I(),{params:x,back:v}=n(),{id:_}=x,[j,q]=t({id:0,username:"",password:"",base_path:"",role:0,permission:0}),[C,D]=a((()=>s.get(`/admin/user/get?id=${_}`)));_&&(async()=>{const e=await D();b(e,q)})();const[T,k]=a((()=>s.post("/admin/user/"+(_?"update":"create"),j)));return l(y,{get loading(){return C()},get children(){return l(i,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[l(u,{get children(){return e("global."+(_?"edit":"add"))}}),l(c,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(d,{for:"username",display:"flex",alignItems:"center",get children(){return e("users.username")}}),l(o,{id:"username",get value(){return j.username},onInput:e=>q("username",e.currentTarget.value)})]}}),l(c,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(d,{for:"password",display:"flex",alignItems:"center",get children(){return e("users.password")}}),l(o,{id:"password",placeholder:"********",get value(){return j.password},onInput:e=>q("password",e.currentTarget.value)})]}}),l(c,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(d,{for:"base_path",display:"flex",alignItems:"center",get children(){return e("users.base_path")}}),l($,{id:"base_path",get value(){return j.base_path},onChange:e=>q("base_path",e),onlyFolder:!0})]}}),l(c,{w:"$full",required:!0,get children(){return[l(d,{display:"flex",alignItems:"center",get children(){return e("users.permission")}}),l(g,{w:"$full",wrap:"wrap",gap:"$2",get children(){return l(p,{each:h,children:(e,n)=>l(r,{name:e,get can(){return m.can(j,n())},onChange:e=>{q("permission",e?j.permission|=1<<n():j.permission&=~(1<<n()))}})})}})]}}),l(f,{get loading(){return T()},onClick:async()=>{const r=await k();b(r,(()=>{w.success(e("global.save_success")),v()}))},get children(){return e("global."+(_?"save":"add"))}})]}})}})}))}}}));
