System.register(["./index-legacy.6db41345.js","./useT-legacy.b414a1f2.js","./useTitle-legacy.f4b0ffcc.js"],(function(e,t){"use strict";var r,n,l,o,a,u,c,s,g,i,d,p,m,f,h,w,$,I,y,b,v,C,x,S;return{setters:[e=>{r=e.W,n=e.f,l=e.a5,o=e.q,a=e.bo,u=e.a,c=e.b7,s=e.u,g=e.a3,i=e.bg,d=e.ag,p=e.x,m=e.I,f=e.bp,h=e.a8,w=e.B,$=e.bk,I=e.aZ,y=e.a_,b=e.al,v=e.h,C=e.n},e=>{x=e.u},e=>{S=e.a}],execute:function(){const t=()=>{const e=r("#f1f3f5","#666666");return n(l,{get bgColor(){return e()},pos:"fixed",top:"0",left:"0",overflow:"hidden",zIndex:"-1",w:"100vw",h:"100vh"})};e("default",(()=>{const e=x();S((()=>e("login.title")));const l=r("white","$neutral1"),[k,j]=o(localStorage.getItem("username")||""),[T,z]=o(localStorage.getItem("password")||""),[_,D]=o(""),[E,K]=a("remember-pwd","false"),[R,U]=u((()=>c.post("/auth/login",{username:k(),password:T(),otp_code:_()}))),{searchParams:q,to:B}=s(),P=async()=>{"true"===E()?(localStorage.setItem("username",k()),localStorage.setItem("password",T())):(localStorage.removeItem("username"),localStorage.removeItem("password"));const t=await U();v(t,(t=>{C.success(e("login.success")),$(t.token),B(decodeURIComponent(q.redirect||"/"),!0)}),((e,t)=>{W()||402!==t?C.error(e):Z(!0)}))},[W,Z]=o(!1);return n(b,{zIndex:"1",w:"$full",h:"100vh",get children(){return[n(g,{get bgColor(){return l()},rounded:"$xl",p:"24px",w:{"@initial":"90%","@sm":"364px"},spacing:"$4",get children(){return[n(i,{alignItems:"center",justifyContent:"space-around",get children(){return n(d,{color:"$info9",fontSize:"$2xl",get children(){return e("login.title")}})}}),n(p,{get when(){return!W()},get fallback(){return n(m,{id:"totp",name:"otp",get placeholder(){return e("login.otp-tips")},get value(){return _()},onChange:e=>D(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&P()}})},get children(){return[n(m,{name:"username",get placeholder(){return e("login.username-tips")},get value(){return k()},onInput:e=>j(e.currentTarget.value)}),n(m,{name:"password",get placeholder(){return e("login.password-tips")},type:"password",get value(){return T()},onInput:e=>z(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&P()}}),n(i,{px:"$1",w:"$full",fontSize:"$sm",color:"$neutral10",justifyContent:"space-between",alignItems:"center",get children(){return n(f,{get checked(){return"true"===E()},onChange:()=>K("true"===E()?"false":"true"),get children(){return e("login.remember")}})}})]}}),n(h,{w:"$full",spacing:"$2",get children(){return[n(w,{colorScheme:"primary",w:"$full",onClick:()=>{W()?D(""):(j(""),z(""))},get children(){return e("login.clear")}}),n(w,{w:"$full",get loading(){return R()},onClick:P,get children(){return e("login.login")}})]}}),n(w,{w:"$full",colorScheme:"accent",onClick:()=>{$(),B(decodeURIComponent(q.redirect||"/"),!0)},get children(){return e("login.use_guest")}}),n(i,{mt:"$2",justifyContent:"space-evenly",alignItems:"center",color:"$neutral10",w:"$full",get children(){return[n(I,{}),n(y,{})]}})]}}),n(t,{})]}})}))}}}));
