import{bN as O,E as _,b as I,h as t,ak as h,N as w,aT as m,al as x,dB as b,t as k,aV as y,S as C,aF as M,as as L,aE as S,a7 as d,cp as D,c_ as P,aj as p,l as z,a as T,m as j,x as E,dC as B,dD as H,G as f,dE as W,H as F,a3 as K,a8 as G}from"./index.5f2c11f5.js";import{b as N}from"./style.98364b7d.js";import{x as R}from"./index.efd0cc32.js";import{g as V,O as U}from"./icon.88224d19.js";import{u as q,I as v,a as $}from"./helper.95f82a9e.js";const r=[{name:"name",textAlign:"left",w:{"@initial":"76%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"24%","@md":"17%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"33%"}}],J=e=>{const{isHide:o}=O();if(o(e.obj))return null;const{setPathAs:c}=_(),{show:g}=N({id:1}),{pushHref:i,to:s}=I(),{isMouseSupported:l}=$(),a=q(),u=()=>z.list_item_filename_overflow;return t(p.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return t(h,{get classList(){return{selected:!!e.obj.selected}},class:"list-item viselect-item",get["data-index"](){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:w()}},as:R,get href(){return e.obj.name},get cursor(){return!l()&&(!m()||a())?"pointer":"default"},get bgColor(){return x(()=>!!e.obj.selected,!0)()?w():void 0},"on:dblclick":n=>{!l()||n.ctrlKey||n.metaKey||n.shiftKey||s(i(e.obj.name))},"on:click":n=>{if(l())return n.preventDefault();if(!!m()){if(n.preventDefault(),a()){s(i(e.obj.name));return}b(e.index,!e.obj.selected)}},onMouseEnter:()=>{c(e.obj.name,e.obj.is_dir,!0)},onContextMenu:n=>{k(()=>{y(!1),b(e.index,!0,!0)}),g(n,{props:e.obj})},get children(){return[t(h,{class:"name-box",spacing:"$1",get w(){return r[0].w},get children(){return[t(C,{get when(){return m()},get children(){return t(v,{"on:click":n=>{n.stopPropagation()},get checked(){return e.obj.selected},onChange:n=>{b(e.index,n.target.checked)}})}}),t(M,{class:"icon",boxSize:"$6",get color(){return L()},get as(){return V(e.obj)},mr:"$1","on:click":n=>{e.obj.type===U.IMAGE&&(n.stopPropagation(),n.preventDefault(),S.emit("gallery",e.obj.name))}}),t(d,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:u()==="multi_line"?"unset":"nowrap","overflow-x":u()==="scrollable"?"auto":"hidden",textOverflow:u()==="ellipsis"?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),t(d,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return D(e.obj.size)}}),t(d,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return r[2].w},get textAlign(){return r[2].textAlign},get children(){return P(e.obj.modified)}})]}})}})},A=e=>{const o=T(),[c,g]=j(),[i,s]=j(!1);E(()=>{c()&&e.sortCallback(c(),i())});const l=a=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:a.textAlign,cursor:"pointer",onClick:()=>{a.name===c()?s(!i()):k(()=>{g(a.name),s(!1)})}});return t(h,{class:"title",w:"$full",p:"$2",get children(){return[t(h,{get w(){return r[0].w},spacing:"$1",get children(){return[t(C,{get when(){return x(()=>!e.disableCheckbox,!0)()&&m()},get children(){return t(v,{get checked(){return B()},get indeterminate(){return H()},onChange:a=>{y(a.target.checked)}})}}),t(d,f(()=>l(r[0]),{get children(){return o(`home.obj.${r[0].name}`)}}))]}}),t(d,f({get w(){return r[1].w}},()=>l(r[1]),{get children(){return o(`home.obj.${r[1].name}`)}})),t(d,f({get w(){return r[2].w}},()=>l(r[2]),{display:{"@initial":"none","@md":"inline"},get children(){return o(`home.obj.${r[2].name}`)}}))]}})},Q=()=>{const e=i=>{var l,a;const s=Array.from((a=(l=i.dataTransfer)==null?void 0:l.items)!=null?a:[]);for(let u=0;u<s.length;u++)if(s[u].kind==="file"){S.emit("tool","upload"),i.preventDefault();break}},{isMouseSupported:o,registerSelectContainer:c,captureContentMenu:g}=$();return c(),t(G,{onDragOver:e,"oncapture:contextmenu":g,get classList(){return{"viselect-container":o()}},class:"list",w:"$full",spacing:"$1",get children(){return[t(A,{sortCallback:W}),t(F,{get each(){return K.objs},children:(i,s)=>t(J,{obj:i,get index(){return s()}})})]}})},ne=Object.freeze(Object.defineProperty({__proto__:null,ListTitle:A,default:Q},Symbol.toStringTag,{value:"Module"}));export{A as L,ne as a,r as c};
