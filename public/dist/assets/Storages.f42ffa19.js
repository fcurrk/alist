import{u as w,a as y,b4 as c,q as C,c4 as d,f as e,a8 as o,B as s,a5 as D,c5 as _,c6 as B,c7 as u,E as g,c8 as h,c9 as F,ca as a,aN as L,bd as m,n as O,a3 as R}from"./index.5b70725d.js";import{u as x}from"./useT.75b175bf.js";import{b as H}from"./useTitle.b2fec78c.js";import{D as N}from"./DeletePopover.6eddaec1.js";const P=()=>{const n=x();H("manage.sidemenu.storages");const{to:l}=w(),[b,p]=y(()=>c.get("/admin/storage/list")),[f,$]=C([]),i=async()=>{const r=await p();m(r,t=>$(t.content))};i();const[S,k]=d(r=>c.post(`/admin/storage/delete?id=${r}`)),[T,v]=d((r,t)=>c.post(`/admin/storage/${t!=null&&t.disabled?"enable":"disable"}?id=${t==null?void 0:t.id}`));return e(R,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(o,{spacing:"$2",get children(){return[e(s,{colorScheme:"accent",get loading(){return b()},onClick:i,get children(){return n("global.refresh")}}),e(s,{onClick:()=>{l("/@manage/storages/add")},get children(){return n("global.add")}})]}}),e(D,{w:"$full",overflowX:"auto",get children(){return e(_,{highlightOnHover:!0,dense:!0,get children(){return[e(B,{get children(){return e(u,{get children(){return[e(g,{each:["mount_path","driver","order","status","remark"],children:r=>e(h,{get children(){return n(`storages.common.${r}`)}})}),e(h,{get children(){return n("global.operations")}})]}})}}),e(F,{get children(){return e(g,{get each(){return f()},children:r=>e(u,{get children(){return[e(a,{get children(){return r.mount_path}}),e(a,{get children(){return n(`drivers.drivers.${r.driver}`)}}),e(a,{get children(){return r.order}}),e(a,{get children(){return r.status}}),e(a,{get children(){return r.remark}}),e(a,{get children(){return e(o,{spacing:"$2",get children(){return[e(s,{onClick:()=>{l(`/@manage/storages/edit/${r.id}`)},get children(){return n("global.edit")}}),e(s,{get loading(){return T()===r.id},colorScheme:"warning",onClick:async()=>{const t=await v(r.id,r);L(t,()=>{i()})},get children(){return n(`global.${r.disabled?"enable":"disable"}`)}}),e(N,{get name(){return r.mount_path},get loading(){return S()===r.id},onClick:async()=>{const t=await k(r.id);m(t,()=>{O.success(n("global.delete_success")),i()})}})]}})}})]}})})}})]}})}})]}})};export{P as default};
